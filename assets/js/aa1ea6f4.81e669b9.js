"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[892],{58330:(o,i,e)=>{e.r(i),e.d(i,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"dashboard-loki-not-responding","title":"Loki\'s Dashboard is not responding","description":"Loki\'s Dashboard is not responding","source":"@site/tutorials/dashboard-loki-not-responding.mdx","sourceDirName":".","slug":"/dashboard-loki-not-responding","permalink":"/tutorial/dashboard-loki-not-responding","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"addons","permalink":"/tutorial/tags/addons"},{"inline":true,"label":"loki","permalink":"/tutorial/tags/loki"},{"inline":true,"label":"troubleshooting","permalink":"/tutorial/tags/troubleshooting"},{"inline":true,"label":"monitoring","permalink":"/tutorial/tags/monitoring"},{"inline":true,"label":"grafana","permalink":"/tutorial/tags/grafana"},{"inline":true,"label":"logs","permalink":"/tutorial/tags/logs"}],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_label":"Loki\'s Dashboard is not responding","sidebar_position":5,"title":"Loki\'s Dashboard is not responding","description":"Loki\'s Dashboard is not responding","tags":["addons","loki","troubleshooting","monitoring","grafana","logs"],"image":"/img/tutorial-img.png"},"sidebar":"tutorialsSidebar","previous":{"title":"Make RDS Database Public","permalink":"/tutorial/make-rds-public"},"next":{"title":"Install KEDA","permalink":"/tutorial/install-keda"}}');var s=e(74848),r=e(28453),t=e(34028);e(26393);const a={sidebar_label:"Loki's Dashboard is not responding",sidebar_position:5,title:"Loki's Dashboard is not responding",description:"Loki's Dashboard is not responding",tags:["addons","loki","troubleshooting","monitoring","grafana","logs"],image:"/img/tutorial-img.png"},l="Loki's Dashboard is not responding",d={},h=[];function g(o){const i={admonition:"admonition",em:"em",h1:"h1",header:"header",li:"li",p:"p",ul:"ul",...(0,r.R)(),...o.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"lokis-dashboard-is-not-responding",children:"Loki's Dashboard is not responding"})}),"\n",(0,s.jsx)(i.admonition,{title:"QUICK SOLUTION",type:"success",children:(0,s.jsx)(i.p,{children:"Remove the 'loki-read' pod. After 60 seconds, it will start working again, along with the Loki DataSource and its related dashboards."})}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsx)(i.p,{children:"This error is more common in clusters with low availability because they generate more node and pod turnover. You can reduce the frequency of this error by increasing the number of loki-read pods in the Loki add-on settings."})}),"\n",(0,s.jsx)(i.p,{children:"Loki may be running, as in the following image:"}),"\n",(0,s.jsx)(t.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki.png",alt:"loki"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"If, due to some Kubernetes rotation, the loki-backend pod is reset WITHOUT the loki-read pod being reset, it starts to fail, such as when I force it by restarting the loki-backend StatefulSet, which leads to the following situation:"}),"\n"]}),"\n",(0,s.jsx)(t.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-2.png",alt:"loki-2"})}),"\n",(0,s.jsxs)(i.p,{children:["It can be seen that the '",(0,s.jsx)(i.em,{children:"Age"}),"' of loki-backend is less than the '",(0,s.jsx)(i.em,{children:"Age"}),"' of loki-read. In these cases, this error occurs, causing the Loki DataSource to malfunction and, consequently, the dashboards that use it to stop working. The error arises because the 'loki-read' pods do not attempt to reconnect to 'loki-backend' and remain in this state where they do not respond to requests from 'loki-backend'."]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"It can be seen that the error was successfully forced, and now the dashboard is unresponsive:"}),"\n"]}),"\n",(0,s.jsx)(t.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-3.png",alt:"loki-3"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"The way to fix it is by restarting the 'loki-read' Deployment or by removing the running Pod."}),"\n"]}),"\n",(0,s.jsx)(t.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-4.png",alt:"loki-4"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Once that is done, we return to the desired situation, which is as follows:"}),"\n"]}),"\n",(0,s.jsx)(t.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-5.png",alt:"loki-5"})}),"\n",(0,s.jsxs)(i.p,{children:["As you can see, the ",(0,s.jsx)(i.em,{children:"Age"})," of loki-read is now less than the ",(0,s.jsx)(i.em,{children:"Age"})," of loki-backend, which confirms that loki-read is connected and the Dashboard is working correctly again, as shown in the following image:"]}),"\n",(0,s.jsx)(t.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-6.png",alt:"loki-6"})}),"\n",(0,s.jsx)(i.p,{children:"The frequency of this error can be reduced by increasing the number of active 'loki-read' pods. This can be done in the Loki Addon settings."}),"\n",(0,s.jsx)(t.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-7.png",alt:"loki-7"})})]})}function c(o={}){const{wrapper:i}={...(0,r.R)(),...o.components};return i?(0,s.jsx)(i,{...o,children:(0,s.jsx)(g,{...o})}):g(o)}},26393:()=>{}}]);