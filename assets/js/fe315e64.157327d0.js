"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5568],{20218:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"s3-batch","title":"S3 Batch","description":"S3 Batch","source":"@site/tutorials/s3-batch.mdx","sourceDirName":".","slug":"/s3-batch","permalink":"/tutorial/s3-batch","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"S3","permalink":"/tutorial/tags/s-3"},{"inline":true,"label":"batch-operations","permalink":"/tutorial/tags/batch-operations"},{"inline":true,"label":"data-migration","permalink":"/tutorial/tags/data-migration"},{"inline":true,"label":"cross-account","permalink":"/tutorial/tags/cross-account"},{"inline":true,"label":"aws","permalink":"/tutorial/tags/aws"},{"inline":true,"label":"storage","permalink":"/tutorial/tags/storage"}],"version":"current","sidebarPosition":7,"frontMatter":{"title":"S3 Batch","sidebar_label":"S3 Batch","sidebar_position":7,"description":"S3 Batch","tags":["S3","batch-operations","data-migration","cross-account","aws","storage"],"image":"/img/tutorials/s3-batch/s3-batch.png"},"sidebar":"tutorialsSidebar","previous":{"title":"Install KEDA","permalink":"/tutorial/install-keda"},"next":{"title":"Third Party VPN Integration","permalink":"/tutorial/third-party-integration-vpn"}}');var o=n(74848),s=n(28453);n(26393);const r={title:"S3 Batch",sidebar_label:"S3 Batch",sidebar_position:7,description:"S3 Batch",tags:["S3","batch-operations","data-migration","cross-account","aws","storage"],image:"/img/tutorials/s3-batch/s3-batch.png"},a=void 0,c={},l=[{value:"1. Enable and configure an inventory or manifest (list of objects)",id:"1-enable-and-configure-an-inventory-or-manifest-list-of-objects",level:2},{value:"Create an S3 Inventory (optional, but recommended)",id:"create-an-s3-inventory-optional-but-recommended",level:3},{value:"Or use a custom manifest (custom CSV)",id:"or-use-a-custom-manifest-custom-csv",level:3},{value:"2. Configure permissions and roles in source and destination accounts",id:"2-configure-permissions-and-roles-in-source-and-destination-accounts",level:2},{value:"S3 Batch Execution Role",id:"s3-batch-execution-role",level:3},{value:"Policy on the destination bucket (cross-account)",id:"policy-on-the-destination-bucket-cross-account",level:3},{value:"3. Create the S3 Batch Operations Job",id:"3-create-the-s3-batch-operations-job",level:2},{value:"Basic Job Configuration",id:"basic-job-configuration",level:3},{value:"Additional options (optional)",id:"additional-options-optional",level:3},{value:"Review and create Job",id:"review-and-create-job",level:3},{value:"4. Monitor the process",id:"4-monitor-the-process",level:2},{value:"5. Validate the transfer",id:"5-validate-the-transfer",level:2},{value:"Summary of key points",id:"summary-of-key-points",level:2}];function d(e){const t={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"Learn how to use S3 Batch Operations to copy large volumes of objects between S3 buckets, including cross-account configurations. This guide will help you migrate data efficiently and scalably."}),"\n",(0,o.jsx)(t.h2,{id:"1-enable-and-configure-an-inventory-or-manifest-list-of-objects",children:"1. Enable and configure an inventory or manifest (list of objects)"}),"\n",(0,o.jsx)(t.h3,{id:"create-an-s3-inventory-optional-but-recommended",children:"Create an S3 Inventory (optional, but recommended)"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["In the ",(0,o.jsx)(t.strong,{children:"Amazon S3"})," console, select the source bucket."]}),"\n",(0,o.jsxs)(t.li,{children:['In the "Management" (or "Administration") section, create an ',(0,o.jsx)(t.strong,{children:"S3 Inventory"})," that generates a periodic report (CSV or Parquet) of all objects."]}),"\n",(0,o.jsx)(t.li,{children:'Verify that the inventory includes "Object version" information (if applicable) and "ETag".'}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"or-use-a-custom-manifest-custom-csv",children:"Or use a custom manifest (custom CSV)"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Alternatively, you can create your own CSV file with the following structure on each line:"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-csv",children:"s3://SOURCE_BUCKET_NAME/object1.txt\ns3://SOURCE_BUCKET_NAME/object2.txt\n...\n"})}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Upload this CSV file (manifest) to an S3 bucket that you have access to."}),"\n"]}),"\n",(0,o.jsx)(t.admonition,{title:"Note",type:"info",children:(0,o.jsx)(t.p,{children:'This inventory or CSV is the "manifest" that S3 Batch will use to know which objects to copy.'})}),"\n",(0,o.jsx)(t.h2,{id:"2-configure-permissions-and-roles-in-source-and-destination-accounts",children:"2. Configure permissions and roles in source and destination accounts"}),"\n",(0,o.jsx)(t.h3,{id:"s3-batch-execution-role",children:"S3 Batch Execution Role"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["In the ",(0,o.jsx)(t.strong,{children:"source"})," account, create an IAM Role that allows S3 Batch Operations (service ",(0,o.jsx)(t.code,{children:"batchoperations.s3.amazonaws.com"}),") to read the source bucket and write to the destination bucket at the same time."]}),"\n",(0,o.jsxs)(t.li,{children:["Make sure the policy includes the ",(0,o.jsx)(t.strong,{children:(0,o.jsx)(t.code,{children:"s3:GetObject"})})," action for the source bucket and ",(0,o.jsx)(t.strong,{children:(0,o.jsx)(t.code,{children:"s3:PutObject"})})," for the destination bucket."]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"policy-on-the-destination-bucket-cross-account",children:"Policy on the destination bucket (cross-account)"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["If the destination bucket is in another account, add a bucket policy that allows the ",(0,o.jsx)(t.code,{children:"s3:PutObject"})," action for the ARN of the IAM role from the previous step."]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"3-create-the-s3-batch-operations-job",children:"3. Create the S3 Batch Operations Job"}),"\n",(0,o.jsx)(t.h3,{id:"basic-job-configuration",children:"Basic Job Configuration"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Enter the S3 console"})," and select ",(0,o.jsx)(t.strong,{children:"Batch Operations"})," in the side menu."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Create a new Job"})," with the following basic configuration:"]}),"\n"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Manifest"}),": Indicate where the inventory or CSV (manifest) containing the list of objects is located."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Operation"}),": Select ",(0,o.jsx)(t.strong,{children:"Copy"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Destination Bucket"}),": Choose the destination bucket (in the other account)."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"IAM Role"}),": Select the role created for this purpose (step 2.1)."]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"additional-options-optional",children:"Additional options (optional)"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Storage Class"}),": Select the storage class you want for the destination bucket (Standard, IA, etc.)."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Object Tags"}),": If you want to replicate or modify tags in the process."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Retention/Legal Hold"}),": If compliance applies."]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"review-and-create-job",children:"Review and create Job"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Verify that the settings are correct and launch the Job."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"4-monitor-the-process",children:"4. Monitor the process"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["In the ",(0,o.jsx)(t.strong,{children:"S3 Batch Operations"})," console, locate your Job and review the status."]}),"\n",(0,o.jsx)(t.li,{children:"Depending on the volume of objects, copying can take from minutes to several hours/days (for millions of files)."}),"\n",(0,o.jsx)(t.li,{children:"Review progress reports and possible errors (for example, objects with access denied)."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"5-validate-the-transfer",children:"5. Validate the transfer"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Object count"}),": Verify that the total number of files in the destination bucket matches what is expected."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Error logs"}),": Check error output or review CloudTrail/S3 Logs for objects that were not copied correctly."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Re-run for failed objects"}),": You can generate a new manifest with only the failed objects and launch another Job."]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"summary-of-key-points",children:"Summary of key points"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Manifest"}),": Properly prepare the inventory or list of objects."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Permissions"}),": Ensure you have an IAM role with policies that allow ",(0,o.jsx)(t.code,{children:"GetObject"})," in source and ",(0,o.jsx)(t.code,{children:"PutObject"})," in destination (cross-account)."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Batch Job"}),': Configure the "Copy" operation with the correct role.']}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Monitoring"}),": Review S3 Batch logs and reports, and retry failed objects if necessary."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},26393:()=>{},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var i=n(96540);const o={},s=i.createContext(o);function r(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);