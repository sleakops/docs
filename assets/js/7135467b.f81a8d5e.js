"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5546],{63:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>d,contentTitle:()=>c,default:()=>g,frontMatter:()=>l,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"cluster/addons/loki","title":"Loki","description":"Introduction","source":"@site/docs/cluster/addons/loki.mdx","sourceDirName":"cluster/addons","slug":"/cluster/addons/loki","permalink":"/cluster/addons/loki","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"Loki","pagination_back":"cluster/addons/grafana","pagination_next":"cluster/addons/kubecost"},"sidebar":"tutorialSidebar","previous":{"title":"Kubecost","permalink":"/cluster/addons/kubecost"},"next":{"title":"Kubecost","permalink":"/cluster/addons/kubecost"}}');var t=s(4848),r=s(8453),a=s(4028),n=s(2644);const l={sidebar_label:"Loki",pagination_back:"cluster/addons/grafana",pagination_next:"cluster/addons/kubecost"},c="Loki",d={},h=[{value:"FAQs",id:"faqs",level:2},{value:"Which dashboards allow me to read logs?",id:"which-dashboards-allow-me-to-read-logs",level:3},{value:"Which is the best way to use Loki?",id:"which-is-the-best-way-to-use-loki",level:3},{value:"How can I modify the processing capacity of Loki?",id:"how-can-i-modify-the-processing-capacity-of-loki",level:3},{value:"How does Loki capture and store logs?",id:"how-does-loki-capture-and-store-logs",level:3},{value:"How is the log collection process?",id:"how-is-the-log-collection-process",level:3}];function u(e){const o={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components},{Details:s}=o;return s||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"loki",children:"Loki"})}),"\n",(0,t.jsxs)(o.p,{children:["Introduction\n",(0,t.jsxs)(o.a,{href:"https://grafana.com/oss/loki/",children:["Loki ",(0,t.jsx)(n.HaR,{})]})," is an Addon that enables you to store and query logs from the containers deployed inside the cluster. Loki depends on ",(0,t.jsxs)(o.a,{href:"/cluster/addons/grafana",children:["Grafana ",(0,t.jsx)(n.HaR,{})]})," as Sleakops uses it as log viewer. It is a crucial tool for troubleshooting as it can store logs of everything inside the cluster which is useful for root cause analysis of problems in your applications or from any resource allocated inside the cluster."]}),"\n",(0,t.jsx)(a.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,t.jsx)("img",{src:"/img/cluster/addons/loki/loki-log-explorer.png",alt:"loki-log-explorer"})}),"\n",(0,t.jsx)(o.h2,{id:"faqs",children:"FAQs"}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(o.h3,{id:"which-dashboards-allow-me-to-read-logs",children:"Which dashboards allow me to read logs?"})}),(0,t.jsx)(o.p,{children:"At this moment, Sleakops provide two dashboard to consult the logs that were recollected by Loki."}),(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"Log Explorer: It's a simple dashboard that allows you to filter by Namespace, Pod, Container and Stream where you can choose between 'stdout' and 'stderr'. It also allows you to search expressions through the 'Search Query' field above."}),"\n",(0,t.jsx)(o.li,{children:"Container Log Dashboard: Similar to the previous but is more close to a Logs Dashboard that lets you analyze more complex cases that you might need. It's slower as it required more processing and for general querying it will not be needed."}),"\n"]})]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(o.h3,{id:"which-is-the-best-way-to-use-loki",children:"Which is the best way to use Loki?"})}),(0,t.jsx)(o.p,{children:"Minimizing the time-range that is being queried is the best way for fast and error-free logs revision as this parameter is the one with the most influence in the weight of the response. We recommend to first check for a big picture of when the problem occured and then check in Loki for logs in a more specific time-range as, generally, logs quantities could be really high.\nBear in mind that Loki contains small processing units for reading, writing and as a controller (backend) so big queries might be slow if not having enough read replicas or processing capacity on them. This is modifiable through Sleakops but will also increase costs."})]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(o.h3,{id:"how-can-i-modify-the-processing-capacity-of-loki",children:"How can I modify the processing capacity of Loki?"})}),(0,t.jsx)(o.p,{children:"SleakOps allows you to modify the processing capacity of the deployed Loki through the configuration of the Addon. One way of increasing its capacity is by modifying the quantity of replicas deployed."}),(0,t.jsx)(a.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,t.jsx)("img",{src:"/img/cluster/addons/loki/loki-replicas-configuration.png",alt:"loki-replicas-configuration"})})]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(o.h3,{id:"how-does-loki-capture-and-store-logs",children:"How does Loki capture and store logs?"})}),(0,t.jsx)(o.p,{children:"Loki collects logs from each Node of the cluster and therefore, from every container that it's running on it. In order to achieve this, SleakOps uses Promtail that is the default log Collector for Loki, for that reason, every Node of the cluster will have a Promtail instance deployed on it that is in charge of scrapping and pushing them to the Loki write instance that after a certain period of time pushes it to the S3 for long-term storage."})]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(o.h3,{id:"how-is-the-log-collection-process",children:"How is the log collection process?"})}),(0,t.jsx)(o.p,{children:"The log collector, Promtail, collects and streams to Loki all the logs output through 'stdout' or 'stderr' from each running container in the cluster"})]})]})}function g(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}}}]);