---
sidebar_position: 3
title: "Database Credentials Access in SleakOps"
description: "How to access database credentials stored as Kubernetes secrets"
date: "2024-12-19"
category: "dependency"
tags: ["database", "credentials", "secrets", "postgres", "vargroup"]
---

import TroubleshootingItem from "@site/src/components/HomepageFeatures/troubleshootingitem";

# Database Credentials Access in SleakOps

**Date:** December 19, 2024  
**Category:** Dependency  
**Tags:** Database, Credentials, Secrets, Postgres, VarGroup

## Problem Description

**Context:** Users need to access database credentials (specifically dbMaster user password) for administrative tasks like disabling triggers and data restoration, but the password is not directly visible in the SleakOps interface.

**Observed Symptoms:**

- Database username is visible but password is not shown
- Need credentials for administrative database operations
- Password not available in SleakOps database interface
- Required for tasks like trigger management and data restoration

**Relevant Configuration:**

- Database type: PostgreSQL
- User: dbMaster
- Storage: Kubernetes Secret in cluster
- Secret naming pattern: `{dbName}-postgres`
- Location: Project namespace

**Error Conditions:**

- Cannot perform administrative database tasks without credentials
- Password not displayed in standard SleakOps interface
- Need access across multiple environments (development, staging, production)

## Detailed Solution

<TroubleshootingItem id="credential-storage" summary="Understanding credential storage in SleakOps">

SleakOps doesn't store database passwords in its own database for security reasons. Instead, credentials are stored as Kubernetes Secrets within your cluster:

- **Storage location**: Kubernetes Secret in the project namespace
- **Secret name format**: `{dbName}-postgres`
- **Security**: Follows Kubernetes secret management best practices
- **Access**: Available through VarGroup editing interface

</TroubleshootingItem>

<TroubleshootingItem id="access-via-vargroup" summary="Accessing credentials through VarGroup">

To view database credentials in SleakOps:

1. **Navigate to your project**
2. **Go to VarGroup section**
3. **Click "Edit" on the relevant VarGroup**
4. **View the credentials**: SleakOps fetches the secret from the cluster and displays it

```bash
# The secret structure typically looks like:
apiVersion: v1
kind: Secret
metadata:
  name: {dbName}-postgres
  namespace: {project-namespace}
data:
  username: <base64-encoded-username>
  password: <base64-encoded-password>
```

</TroubleshootingItem>

<TroubleshootingItem id="direct-cluster-access" summary="Direct access via kubectl (alternative method)">

If you have cluster access, you can retrieve credentials directly:

```bash
# List secrets in the project namespace
kubectl get secrets -n {project-namespace}

# Get the specific database secret
kubectl get secret {dbName}-postgres -n {project-namespace} -o yaml

# Decode the password directly
kubectl get secret {dbName}-postgres -n {project-namespace} -o jsonpath='{.data.password}' | base64 --decode
```

**Note**: This method requires kubectl access to your cluster.

</TroubleshootingItem>

<TroubleshootingItem id="multiple-environments" summary="Managing credentials across environments">

For accessing credentials in different environments:

1. **Development Environment**:

   - Navigate to development project
   - Follow VarGroup editing process

2. **Staging/Production**:
   - Repeat the same process for each environment
   - Each environment has its own namespace and secrets
   - Secret names follow the same pattern: `{dbName}-postgres`

```bash
# Example for different environments
# Development
kubectl get secret myapp-postgres -n myproject-dev

# Staging
kubectl get secret myapp-postgres -n myproject-staging

# Production
kubectl get secret myapp-postgres -n myproject-prod
```

</TroubleshootingItem>

<TroubleshootingItem id="administrative-tasks" summary="Using credentials for administrative tasks">

Once you have the credentials, you can use them for:

**Database Connection**:

```bash
# Connect to PostgreSQL
psql -h {database-host} -U dbMaster -d {database-name}
```

**Common Administrative Tasks**:

```sql
-- Disable triggers
ALTER TABLE {table_name} DISABLE TRIGGER ALL;

-- Enable triggers
ALTER TABLE {table_name} ENABLE TRIGGER ALL;

-- Create database backup
pg_dump -h {host} -U dbMaster {database_name} > backup.sql

-- Restore database
psql -h {host} -U dbMaster {database_name} < backup.sql
```

</TroubleshootingItem>

<TroubleshootingItem id="security-considerations" summary="Security best practices">

**Important Security Notes**:

- Credentials are stored securely as Kubernetes Secrets
- Access is controlled through SleakOps project permissions
- Never store credentials in plain text files
- Use environment-specific credentials
- Rotate passwords regularly

**Access Control**:

- Only users with project access can view credentials
- VarGroup editing requires appropriate permissions
- Cluster access is restricted to authorized users

</TroubleshootingItem>

---

_This FAQ was automatically generated on December 19, 2024 based on a real user query._
