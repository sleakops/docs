import { FiExternalLink } from "react-icons/fi";

# Initial image build

## Why do we only automate the first build?

We make a first build of the image to deploy your apps faster, as we take advantage of the already active infrastructure. New images are built when services are published in deployments

### How and when does Sleakops builds the image?

When a project is created, you need to point to a path within the git repository where the Dockerfile is.
Sleakops scans the Dockerfile in search of arguments that are necessary for the build and asks you for values to make this first build.
The project list indicates the state of every project, and whether some extra information is required.
The values you provide for this initial build aren't meant to be permanent and can be modified for future builds.

The image is built once a namespace is created, that is when a project and an environment join for a service or a dependency.
Sleakops uses the [Kaniko <FiExternalLink/>](https://github.com/GoogleContainerTools/kaniko) tool image, which is a tool to create container images from a Dockerfile, inside a Kubernetes cluster.
When the cluster is ready and you have provided all the arguments for the Dockerfile, a Kubernetes job is launched, along with a persistent volume for storage and the corresponding authentication secrets.

Finally, the image is pushed to the ECR of the project, which is hosted in the management account,
according to our [proposed architecture](/docs/provider/aws.mdx). The resulting image has the project name and is tagged `environment-name_latest`.
