import { FiExternalLink, FiCornerRightDown } from "react-icons/fi";

# Servicio

En SleakOps, un servicio es una entidad de una aplicación, como en una arquitectura de microservicios.

## Crear un Servicio

Para crear un servicio, debes proporcionar la siguiente información básica:

- Proyecto y Entorno en el que se desplegará el servicio.
- Un 'nombre' para identificar el servicio.
- Un 'comando' (o CMD del Dockerfile) que se aplicará para la ejecución del servicio. Si no se proporciona un comando, se usará el comando predeterminado de Docker.
- El TIPO de Servicio, que se describe [más abajo <FiCornerRightDown/>](#tipos-de-servicio).
- El conjunto de recursos, que también se describe [más abajo <FiCornerRightDown/>](#conjunto-de-recursos).

### Tipos de Servicio

Dependiendo del tipo de servicio elegido, necesitarás completar diferentes campos. Además, el Comando siempre se aplicará, por lo que ahí es donde radica la importancia de ese campo, que normalmente es la línea que usas para hacer funcionar el servicio. Los tipos de servicio posibles son:
- **Worker**: No requiere nada más, solo asegúrate de que el CMD definido active el trabajador.
- **Cron Job**: Debes definir el 'Cron' o la frecuencia de ejecución de un Job, que básicamente establece con qué frecuencia ocurre el Job.
- **Hook**: Se requiere establecer un 'evento', cuando este evento ocurra, el Hook ejecutará el CMD.
- **Web Service**: Un Web Service requiere una 'url' que funcione como su punto de acceso. SleakOps genera esta URL en base al nombre del servicio y external-dns usará la jerarquía de donde se haya creado. Como ejemplo, la URL será: `{nombre_servicio}.{nombre_entorno}.{dominio_proveedor}`.

## Crear un Job

Un Job utiliza los mismos campos que el Servicio, la diferencia radica en que un Job puede ser creado y ejecutado en cualquier momento. Por otro lado, mientras que un Servicio se crea como una necesidad estructural de tu Despliegue, un Job es algo que creas para ejecutarlo en el momento.

### Conjunto de Recursos

También necesitarás configurar el conjunto de recursos necesario para que este servicio funcione.

| Nombre           | Descripción                                                                                                                                                                    |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **CPU Mínima**   | CPU mínima solicitada en milicores. Más información [aquí <FiExternalLink/>](https://kubernetes.io/concepts/configuration/manage-resources-containers/#meaning-of-cpu)    |
| **CPU Máxima**   | CPU máxima solicitada en milicores. Más información [aquí <FiExternalLink/>](https://kubernetes.io/concepts/configuration/manage-resources-containers/#meaning-of-cpu)    |
| **Memoria Mínima** | Memoria mínima solicitada en MegaBytes. Más información [aquí <FiExternalLink/>](https://kubernetes.io/concepts/configuration/manage-resources-containers/#meaning-of-cpu) |
| **Memoria Máxima** | Memoria máxima solicitada en MegaBytes. Más información [aquí <FiExternalLink/>](https://kubernetes.io/concepts/configuration/manage-resources-containers/#meaning-of-cpu) |
| **Escalado Automático** | Habilita el Escalado Horizontal de Pods como se describe [aquí <FiExternalLink/>](https://kubernetes.io/tasks/run-application/horizontal-pod-autoscale/).                      |
| **Objetivo CPU**  | Solo cuando el escalado automático está habilitado. Utilización promedio de CPU que activa el escalado.                                                                        |
| **Objetivo Memoria** | Solo cuando el escalado automático está habilitado. Utilización promedio de memoria que activa el escalado.                                                                  |
| **Réplicas Mínimas** | Solo cuando el escalado automático está habilitado. Cantidad mínima de réplicas a lograr.                                                                                     |
| **Réplicas Máximas** | Solo cuando el escalado automático está habilitado. Cantidad máxima de réplicas a lograr.                                                                                     |
| **Réplicas Deseadas** | Solo cuando el escalado automático está habilitado. La cantidad de réplicas que el servicio tendrá inicialmente.                                                             |

### Recursos en la Nube

SleakOps no genera recursos en tu proveedor cuando creas un servicio, pero debes tener en cuenta que el conjunto de recursos que has definido proviene de los nodos del Clúster, por lo que estos recursos, como RAM y núcleos, se consumen de la instancia EC2.
