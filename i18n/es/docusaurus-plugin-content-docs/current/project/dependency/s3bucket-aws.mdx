import Zoom from "react-medium-image-zoom";
import "react-medium-image-zoom/dist/styles.css";
import { FiExternalLink } from "react-icons/fi";

# AWS S3 Bucket

SleakOps se integra perfectamente con Amazon Simple Storage Service (S3), un servicio de almacenamiento de objetos altamente duradero y seguro. Amazon S3 proporciona una solución escalable para almacenar y recuperar cualquier cantidad de datos, lo que lo convierte en una opción ideal para almacenamiento de copias de seguridad, gestión de activos y archivo de datos dentro de tus aplicaciones. Al aprovechar SleakOps para la integración con S3, puedes gestionar fácilmente tus cubos S3 y acceder a los datos almacenados directamente desde tu entorno EKS (Elastic Kubernetes Service).

<details>
<summary>
**¿Cuándo debería usar Amazon S3?**
</summary>
Deberías usar Amazon S3 cuando necesites:
- Almacenamiento escalable para archivos, medios, copias de seguridad o activos estáticos.
- Almacenamiento altamente duradero y disponible para datos críticos.
- Soluciones de archivo de datos o recuperación ante desastres.
- Una solución rentable para almacenar grandes cantidades de datos no estructurados.
</details>

<details>
<summary>
**¿Cómo creo un volcado de S3?**
</summary>
Para crear una copia de seguridad de los datos de tu cubo S3, sigue estos pasos:
  1. **Asegúrate de tener acceso de administrador**: Verifica que tienes acceso de administrador a la cuenta de AWS donde se encuentra el cubo S3.
  2. **Instala AWS CLI**: Asegúrate de que AWS CLI esté instalado en tu máquina local. Para instrucciones de instalación, consulta la [documentación oficial de AWS CLI <FiExternalLink/>](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html).
  3. **Configura AWS CLI**: Asegúrate de que tus claves de acceso y secretas estén configuradas en el perfil predeterminado. Si están bajo un perfil diferente, utiliza la opción `--profile PROFILE_NAME` con los comandos.
  4. **Ejecuta los comandos de copia de seguridad**: ```sh
  aws sts assume-role --role-arn arn:aws:iam::ACCOUNT_ID:role/SleakopsAdminRole
  aws s3 sync s3://BUCKET_NAME /path/to/local/directory```
  Sustituye ACCOUNT_ID, BUCKET_NAME y /path/to/local/directory con tus detalles específicos.
</details>

<details>
<summary>
**¿SleakOps crea Grupos de Variables para las dependencias de S3?**
</summary>
Sí, cuando configuras un cubo S3 en SleakOps, automáticamente creará un Grupo de Variables. Esto almacena de forma segura las claves de acceso y otra información sensible necesaria para gestionar e interactuar con tu cubo S3.
</details>

<details>
<summary>
**¿Qué es una Lista de Control de Acceso (ACL) de S3?**
</summary>
Una Lista de Control de Acceso (ACL) de S3 define los permisos sobre quién puede acceder a tu cubo S3 y su contenido. Controla el nivel de acceso que se concede a usuarios, grupos o entidades de AWS predefinidas.  
Puedes elegir un ACL que defina quién puede acceder al cubo y qué nivel de permiso tienen. Las opciones disponibles son:  
- `private`: Solo el propietario del cubo tiene acceso completo. (Por defecto)
- `public-read`: Cualquier persona puede leer los objetos en el cubo.
- `public-read-write`: Cualquier persona puede leer y escribir en el cubo.
- `aws-exec-read`: Otorga acceso de lectura a los servicios de AWS como CloudFront.
- `authenticated-read`: Otorga acceso de lectura a usuarios autenticados de AWS.
- `log-delivery-write`: Otorga acceso de escritura al cubo para fines de registro.
Para más detalles, consulta la [documentación de S3 ACL de AWS <FiExternalLink/>](https://docs.aws.amazon.com/AmazonS3/latest/userguide/acl-overview.html).
</details>

<details>
<summary>
**¿Qué es Amazon CloudFront?**
</summary>
Amazon CloudFront es una Red de Distribución de Contenido (CDN) que acelera la entrega de tu contenido estático y dinámico (como HTML, CSS, imágenes y videos) al almacenarlo en ubicaciones cercanas a tus usuarios alrededor del mundo.
</details>

<details>
<summary>
**¿Puedo usar un dominio personalizado con CloudFront?**
</summary>
Sí, SleakOps te permite establecer un alias personalizado (subdominio) para tu distribución de CloudFront. Por ejemplo, podrías usar `cdn.mydomain.com` como la URL de tu distribución de CloudFront en lugar de la URL predeterminada de CloudFront.
</details>

<details>
<summary>
**¿Qué es un encabezado personalizado en CloudFront?**
</summary>
Los Encabezados Personalizados te permiten incluir información adicional en cada solicitud que CloudFront realiza a tu cubo S3. Esta característica te brinda un mayor control sobre cómo se accede y entrega tu contenido de S3 al adjuntar metadatos específicos a las solicitudes.  
SleakOps te permite definir encabezados personalizados para CloudFront, que serán incluidos en todas las solicitudes enviadas a tu cubo S3. Esto es útil para agregar medidas de seguridad, gestionar permisos o realizar un seguimiento de las solicitudes.  
```
custom_headers:  
  - key: "X-Custom-Header"  
    value: "MyCustomValue"
```  
</details>

## Configura tu cubo S3
### 1. Agregar S3 Bucket como Dependencia
Para integrar S3 Bucket con SleakOps:
1. En la consola de SleakOps, ve a la sección "Dependencias"
2. Elige "S3 Bucket" de la lista de tipos de dependencias disponibles. 
Para más detalles, consulta [Dependencias: Integración de Bases de Datos, Caching y Servicios de Mensajería](/project/dependency/index.mdx).

### 2. Configura tu cubo S3.
Al agregar un cubo S3 como dependencia en SleakOps, deberás configurar los siguientes atributos:

| **Atributo** | **Descripción** |
| --- | --- |
| **Lista de Control de Acceso (ACL) de S3** | Especifica el nivel de acceso para el cubo S3 y su contenido. Opciones: `private`, `public-read`, `public-read-write`, `aws-exec-read`, `authenticated-read`, `log-delivery-write` |
| **Habilitar CloudFront** | Permite habilitar Amazon CloudFront, una CDN para entregar el contenido del cubo S3 a nivel global. |
| **Alias** | El alias para el cubo S3 o la distribución de CloudFront (por ejemplo, `cdn.mydomain.com`). |
| **Clase de Precio** | Define el conjunto de ubicaciones de borde globales de CloudFront utilizadas para servir contenido. Opciones: `Usar todas las ubicaciones de borde (mejor rendimiento)`, `Usar solo América del Norte`, `Europa`, `Asia`, `Medio Oriente` y `África`, `Usar solo América del Norte y Europa`. Revisa [Clase de Precios de AWS <FiExternalLink/>](https://aws.amazon.com/cloudfront/pricing/). |
| **Encabezados Personalizados** | Encabezados personalizados que CloudFront incluirá en todas las solicitudes enviadas al cubo S3. - Clave: La clave del encabezado, como `X-Custom-Header`. - Valor: El valor que deseas asignar al encabezado, como `MyCustomValue`. |
| **Sobrescribir** | Especifica si CloudFront debe sobrescribir los encabezados existentes en las solicitudes del origen. |

<Zoom overlayBgColorEnd="rgba(255, 255, 255, 0.8)">
<img
    src="/img/dependency/s3/s3-create-p1.png"
    alt="s3-create-p1"
/>
</Zoom>


Después de esos datos básicos, si activaste CloudFront, podrás personalizar sus encabezados.  
Para hacerlo:
  1. En el formulario, busca el campo _Encabezados personalizados de CloudFront_ y haz clic en + _Agregar ítem_.
  2. Completa _Clave y Valor_.
Puedes agregar tantos como necesites.

<Zoom overlayBgColorEnd="rgba(255, 255, 255, 0.8)">
<img
    src="/img/dependency/s3/s3-create-cloudfront.png"
    alt="s3-create-cloudfront"
/>
</Zoom>

### 3. Personaliza los nombres de tus variables para tu S3.

Como se explicó, cuando se crea una dependencia, SleakOps genera un vargroup para contener todos los atributos necesarios.  

<Zoom overlayBgColorEnd="rgba(255, 255, 255, 0.8)">
<img
    src="/img/dependency/s3/s3-create-outputs.png"
    alt="s3-create-outputs"
/>
</Zoom>

En este paso, puedes cambiar el nombre de los atributos si es necesario, pero SleakOps completará los valores automáticamente.  
Después de este paso, tu dependencia estará creada.