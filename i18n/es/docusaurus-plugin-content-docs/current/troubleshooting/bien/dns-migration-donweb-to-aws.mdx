---
sidebar_position: 3
title: "Migración DNS de DonWeb a AWS"
description: "Guía completa para migrar registros DNS de DonWeb a AWS Route 53"
date: "2024-01-15"
category: "proveedor"
tags: ["aws", "dns", "route53", "migración", "donweb"]
---

import TroubleshootingItem from "@site/src/components/HomepageFeatures/troubleshootingitem";

# Migración DNS de DonWeb a AWS

**Fecha:** 15 de enero de 2024  
**Categoría:** Proveedor  
**Etiquetas:** AWS, DNS, Route 53, Migración, DonWeb

## Descripción del Problema

**Contexto:** El usuario necesita migrar los registros DNS del proveedor de hosting DonWeb a AWS Route 53, incluyendo la página de aterrizaje en WordPress y los servicios de correo corporativo.

**Síntomas Observados:**

- DNS actual gestionado por el proveedor DonWeb
- Página de aterrizaje WordPress alojada en DonWeb
- Servicios de correo corporativo alojados en DonWeb
- Necesidad de consolidar todos los servicios en AWS
- Incertidumbre sobre dónde configurar los registros DNS en AWS

**Configuración Relevante:**

- Proveedor actual: DonWeb
- Servicios: sitio web WordPress + correo corporativo
- Plataforma destino: AWS
- Servicio DNS requerido: AWS Route 53

**Condiciones de Error:**

- Riesgo de interrupción del servicio durante la migración
- Necesidad de mantener la continuidad del servicio de correo
- El sitio WordPress debe permanecer accesible

## Solución Detallada

<TroubleshootingItem id="route53-setup" summary="Configuración de AWS Route 53 para la gestión DNS">

AWS Route 53 es el servicio DNS donde gestionarás los registros de tu dominio:

1. **Accede a la Consola de Route 53**:

   - Ve a la Consola AWS → Route 53
   - Haz clic en "Hosted zones"
   - Haz clic en "Create hosted zone"

2. **Crear Hosted Zone**:

   - Ingresa el nombre de tu dominio (ejemplo: `tuempresa.com`)
   - Selecciona "Public hosted zone"
   - Haz clic en "Create hosted zone"

3. **Anota los Servidores de Nombre**:
   - AWS proporcionará 4 servidores de nombre
   - Guarda estos para usarlos luego con tu registrador de dominio

</TroubleshootingItem>

<TroubleshootingItem id="export-dns-records" summary="Exportar registros DNS desde DonWeb">

Antes de migrar, necesitas exportar tu configuración DNS actual:

1. **Accede al Panel de Control de DonWeb**:

   - Inicia sesión en tu cuenta DonWeb
   - Navega a la sección de gestión DNS
   - Busca "Zona DNS" o "Registros DNS"

2. **Documenta los Registros Actuales**:
   Crea una lista de todos los registros DNS actuales:

   ```
   Registros A:
   - @ (dominio raíz) → DIRECCIÓN_IP
   - www → DIRECCIÓN_IP

   Registros MX (Correo):
   - @ → mail.donweb.com (prioridad 10)

   Registros CNAME:
   - Cualquier subdominio apuntando a otros servicios

   Registros TXT:
   - Registros SPF para correo
   - Cualquier registro de verificación
   ```

3. **Opciones de Exportación**:
   - Busca opción "Exportar" o "Descargar"
   - Algunos proveedores ofrecen exportación de archivo de zona
   - Si no está disponible, documenta manualmente todos los registros

</TroubleshootingItem>

<TroubleshootingItem id="migrate-wordpress" summary="Migración de WordPress a AWS">

Para la migración de WordPress a AWS, tienes varias opciones:

**Opción 1: AWS Lightsail (Recomendado para sitios simples)**

1. Crea una instancia AWS Lightsail con WordPress
2. Migra tus archivos y base de datos de WordPress
3. Actualiza el registro A del DNS para apuntar a la nueva IP

**Opción 2: EC2 con RDS**

1. Configura una instancia EC2 para el servidor web
2. Configura RDS para la base de datos MySQL
3. Migra archivos y base de datos de WordPress
4. Configura grupos de seguridad y balanceador de carga

**Opción 3: AWS App Runner o ECS**

1. Conteneriza tu aplicación WordPress
2. Despliega usando App Runner o ECS
3. Utiliza RDS para la base de datos

```bash
# Ejemplo: Crear instancia Lightsail para WordPress
aws lightsail create-instances \
  --instance-names "wordpress-site" \
  --availability-zone "us-east-1a" \
  --blueprint-id "wordpress" \
  --bundle-id "nano_2_0"
```

</TroubleshootingItem>

<TroubleshootingItem id="migrate-email" summary="Migración de servicios de correo corporativo">

Para la migración del correo corporativo, considera estas opciones en AWS:

**Opción 1: Amazon WorkMail**

1. Configura la organización Amazon WorkMail
2. Crea cuentas de usuario
3. Configura registros MX para apuntar a WorkMail
4. Migra los correos existentes (si es necesario)

**Opción 2: Correo de terceros con DNS en AWS**

1. Elige proveedor de correo (Google Workspace, Microsoft 365)
2. Configura registros MX en Route 53
3. Actualiza registros SPF/DKIM

**Ejemplo de configuración de registro MX:**

```
Tipo: MX
Nombre: @ (o dejar en blanco)
Valor: 10 inbound-smtp.us-east-1.amazonaws.com (para WorkMail)
TTL: 300
```

**Ejemplo de registro SPF:**

```
Tipo: TXT
Nombre: @ (o dejar en blanco)
Valor: "v=spf1 include:amazonses.com ~all"
TTL: 300
```

</TroubleshootingItem>

<TroubleshootingItem id="dns-records-configuration" summary="Configuración de registros DNS en Route 53">

Una vez que tus servicios estén listos en AWS, configura los registros DNS:

1. **Registros A para el sitio web**:

   ```
   Tipo: A
   Nombre: @ (dominio raíz)
   Valor: TU_DIRECCIÓN_IP_AWS
   TTL: 300

   Tipo: A
   Nombre: www
   Valor: TU_DIRECCIÓN_IP_AWS
   TTL: 300
   ```

2. **Registros MX para correo**:

   ```
   Tipo: MX
   Nombre: @
   Valor: 10 tu-servidor-correo.amazonaws.com
   TTL: 300
   ```

3. **Registros CNAME** (si es necesario):

   ```
   Tipo: CNAME
   Nombre: subdominio
   Valor: objetivo.dominio.com
   TTL: 300
   ```

4. **Registros TXT para autenticación de correo**:
   ```
   Tipo: TXT
   Nombre: @
   Valor: "v=spf1 include:amazonses.com ~all"
   TTL: 300
   ```

</TroubleshootingItem>

<TroubleshootingItem id="migration-process" summary="Proceso de migración paso a paso">

**Fase 1: Preparación**

1. Exporta todos los registros DNS desde DonWeb
2. Configura los servicios AWS (Lightsail/EC2 para WordPress, WorkMail para correo)
3. Crea la zona hospedada en Route 53
4. Prepara los nuevos registros DNS

**Fase 2: Migración de servicios**

1. Migra WordPress a AWS
2. Configura el servicio de correo en AWS
3. Prueba ambos servicios con IPs temporales

**Fase 3: Cambio de DNS**

1. Reduce TTL de registros DNS actuales a 300 segundos (5 minutos)
2. Espera el tiempo del TTL anterior para que se propague
3. Actualiza los servidores de nombre en tu registrador de dominio
4. Configura los nuevos registros DNS en Route 53

**Fase 4: Verificación**

1. Verifica que el sitio web sea accesible
2. Prueba el envío y recepción de correos
3. Monitorea por 24-48 horas para asegurar estabilidad

</TroubleshootingItem>

<TroubleshootingItem id="nameserver-update" summary="Actualización de servidores de nombre en el registrador">

El paso más crítico es actualizar los servidores de nombre en tu registrador de dominio:

1. **Accede a tu registrador de dominio** (donde compraste el dominio)
2. **Busca la sección DNS o Servidores de Nombre**
3. **Reemplaza los servidores de nombre actuales** con los proporcionados por AWS Route 53:

   ```
   Servidores de nombre de AWS Route 53 (ejemplo):
   ns-1234.awsdns-12.com
   ns-5678.awsdns-34.net
   ns-9012.awsdns-56.org
   ns-3456.awsdns-78.co.uk
   ```

4. **Guarda los cambios**
5. **Espera la propagación** (puede tomar de 24 a 48 horas)

**Verificar la propagación:**

```bash
# Verificar desde diferentes ubicaciones
dig NS tudominio.com @8.8.8.8
dig NS tudominio.com @1.1.1.1

# Usar herramientas online
# whatsmydns.net
# dnschecker.org
```

</TroubleshootingItem>

<TroubleshootingItem id="rollback-plan" summary="Plan de reversión en caso de problemas">

Siempre ten un plan de reversión preparado:

**Plan de reversión rápida:**

1. **Mantén acceso a DonWeb** durante al menos 72 horas después de la migración
2. **Documenta la configuración DNS original** antes de hacer cambios
3. **Ten los servidores de nombre originales** listos para restaurar

**Pasos de reversión:**

```bash
# Si algo sale mal, puedes revertir rápidamente:

1. Accede a tu registrador de dominio
2. Cambia los servidores de nombre de vuelta a los de DonWeb
3. Espera 5-15 minutos para que se propague (si habías reducido el TTL)
4. Verifica que el sitio y correo funcionen normalmente
```

**Indicadores de que necesitas hacer rollback:**

- El sitio web no es accesible después de 2 horas
- Los correos no se envían o reciben
- Errores SSL/TLS persistentes
- Pérdida significativa de tráfico web

</TroubleshootingItem>

<TroubleshootingItem id="post-migration-monitoring" summary="Monitoreo post-migración">

Después de completar la migración, es crucial monitorear:

**Herramientas de monitoreo recomendadas:**

1. **AWS CloudWatch** para monitorear servicios AWS
2. **Route 53 Health Checks** para monitorear disponibilidad
3. **Google Search Console** para verificar indexación
4. **Herramientas de correo** para verificar entregabilidad

**Configurar alertas:**

```bash
# Configurar health check en Route 53
aws route53 create-health-check \
  --caller-reference "website-health-check-$(date +%s)" \
  --health-check-config Type=HTTPS,ResourcePath=/,FullyQualifiedDomainName=tudominio.com,Port=443
```

**Métricas a monitorear:**

- Tiempo de respuesta del sitio web
- Disponibilidad del servicio (uptime)
- Entregabilidad de correos
- Errores SSL/TLS
- Tráfico web y conversiones

**Checklist post-migración (primeras 48 horas):**

- [ ] Sitio web accesible desde múltiples ubicaciones
- [ ] Correos se envían y reciben correctamente
- [ ] Certificados SSL funcionan correctamente
- [ ] Formularios de contacto funcionan
- [ ] Analytics y tracking funcionan
- [ ] SEO no se ve afectado negativamente

</TroubleshootingItem>

<TroubleshootingItem id="troubleshooting-common-issues" summary="Solución de problemas comunes">

**Problemas frecuentes y sus soluciones:**

1. **Sitio web no accesible:**

   ```bash
   # Verificar propagación DNS
   dig A tudominio.com
   dig A www.tudominio.com
   
   # Verificar desde diferentes DNS
   nslookup tudominio.com 8.8.8.8
   nslookup tudominio.com 1.1.1.1
   ```

2. **Correos no funcionan:**

   ```bash
   # Verificar registros MX
   dig MX tudominio.com
   
   # Probar envío de correo
   telnet tu-servidor-correo.com 25
   ```

3. **Certificado SSL no válido:**

   - Verifica que el dominio apunte a la IP correcta
   - Regenera el certificado SSL en AWS
   - Verifica configuración de HTTPS en el servidor

4. **Propagación DNS lenta:**

   - Verifica que los TTL estén configurados correctamente
   - Usa herramientas de verificación DNS global
   - Espera hasta 48 horas para propagación completa

**Comandos útiles para diagnóstico:**

```bash
# Verificar todos los registros DNS
dig ANY tudominio.com

# Verificar ruta de red
traceroute tudominio.com

# Verificar certificado SSL
openssl s_client -connect tudominio.com:443 -servername tudominio.com
```

</TroubleshootingItem>

---

_Esta sección de preguntas frecuentes fue generada automáticamente el 19 de diciembre de 2024 basada en una consulta real de usuario._
