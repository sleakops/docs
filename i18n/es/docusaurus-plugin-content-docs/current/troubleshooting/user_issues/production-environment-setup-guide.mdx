---
sidebar_position: 3
title: "Guía de Configuración del Entorno de Producción"
description: "Guía paso a paso para crear y configurar entornos de producción en SleakOps"
date: "2024-12-19"
category: "proyecto"
tags: ["producción", "entorno", "despliegue", "configuración", "ajustes"]
---

import TroubleshootingItem from "@site/src/components/HomepageFeatures/troubleshootingitem";

# Guía de Configuración del Entorno de Producción

**Fecha:** 19 de diciembre de 2024  
**Categoría:** Proyecto  
**Etiquetas:** Producción, Entorno, Despliegue, Configuración, Ajustes

## Descripción del Problema

**Contexto:** Los usuarios necesitan crear un entorno de producción en SleakOps para desplegar aplicaciones desde la rama principal, separado de los entornos de desarrollo que típicamente usan ramas develop.

**Síntomas Observados:**

- Necesidad de crear un nuevo entorno de producción desde cero
- Requisito de separar los despliegues de producción de los de desarrollo
- Necesidad de migrar o replicar configuraciones existentes de desarrollo
- Requisitos de migración de base de datos para datos de producción

**Configuración Relevante:**

- Tipo de entorno: Producción (entorno raíz)
- Estrategia de ramas: rama main para producción vs develop para staging
- Base de datos: PostgreSQL con posibles necesidades de migración de datos
- Configuración de dominio: dominios específicos para producción

**Condiciones de Error:**

- Falta de un proceso claro paso a paso para la configuración de producción
- Incertidumbre sobre la replicación de recursos desde desarrollo
- Complejidad en la migración de base de datos

## Solución Detallada

<TroubleshootingItem id="create-production-environment" summary="Paso 1: Crear Entorno de Producción">

### Creando el Entorno de Producción

1. **Navegar a Entornos**

   - Ve a tu panel de control de SleakOps
   - Haz clic en **Entornos** en la barra lateral

2. **Crear Nuevo Entorno**

   - Haz clic en **"Crear Entorno"**
   - Pon el nombre como `prod` o `producción`
   - **Importante**: Marca este entorno como **"Entorno Raíz"**

3. **Configurar Ajustes de Dominio**
   - Configura tus dominios de producción
   - Configura certificados SSL si es necesario
   - Asegúrate de que las configuraciones DNS apunten a tu infraestructura de producción

### Ejemplo de Configuración del Entorno

```yaml
name: prod
type: root
domain_config:
  primary_domain: "myapp.com"
  ssl_enabled: true
  certificate_type: "letsencrypt"
branch_strategy:
  default_branch: "main"
  auto_deploy: true
```

</TroubleshootingItem>

<TroubleshootingItem id="replicate-resources" summary="Paso 2: Replicar Recursos de Desarrollo">

### Proceso de Replicación de Recursos

Necesitas recrear todos los recursos de tu entorno de desarrollo:

#### Proyectos

1. **Crear Nuevo Proyecto**
   - Usa la misma configuración que en desarrollo
   - Cambia la rama de `develop` a `main`
   - Actualiza las variables de entorno para producción

#### Dependencias

1. **Dependencias de Base de Datos**

   - Crea instancias de PostgreSQL para producción
   - Configura con un tamaño apropiado para producción
   - Configura respaldo y monitoreo

2. **Dependencias de Caché**
   - Redis u otras soluciones de caché
   - Configura con especificaciones para producción

#### Ejecuciones (Workloads)

1. **Servicios Web**

   - Replica las configuraciones de servicios web
   - Ajusta los límites de recursos para la carga de producción
   - Configura chequeos de salud y monitoreo

2. **Servicios Worker**
   - Procesadores de trabajos en segundo plano
   - Tareas programadas y cron jobs

#### Grupos de Variables

1. **Variables de Entorno**
   - Crea grupos de variables específicos para producción
   - Actualiza claves API, conexiones de base de datos
   - Establece flags de características para producción

### Lista de Verificación para Configuración de Producción

- [ ] Entorno creado y marcado como raíz
- [ ] Proyectos configurados con rama main
- [ ] Dependencias de base de datos creadas
- [ ] Dependencias de caché configuradas
- [ ] Servicios web replicados
- [ ] Servicios worker configurados
- [ ] Grupos de variables para producción creados
- [ ] Dominio y SSL configurados
- [ ] Monitoreo y alertas habilitados

</TroubleshootingItem>

<TroubleshootingItem id="database-migration" summary="Paso 3: Migración de Base de Datos (Si es Necesario)">

### Proceso de Importación de Volcado de Base de Datos

Si necesitas migrar datos desde desarrollo a producción:

#### Requisitos Previos

1. **Crear Volcado de Base de Datos**

   ```bash
   pg_dump -h dev-db-host -U username -d database_name > production_dump.sql
   ```

2. **Preparar Base de Datos de Producción**
   - Asegúrate de que la instancia PostgreSQL de producción esté en ejecución
   - Verifica las credenciales de conexión
   - Asegura espacio de almacenamiento suficiente

#### Proceso de Importación

1. **Acceder a la Función de Importación de Base de Datos**

   - Ve a tu dependencia PostgreSQL en el entorno de producción
   - Busca la opción "Importar Base de Datos" o "Restaurar"

2. **Subir e Importar**
   - Sube tu archivo de volcado
   - Ejecuta el proceso de importación
   - Monitorea el progreso de la importación

#### Verificación Post-Importación

```sql
-- Verificar integridad de datos
SELECT COUNT(*) FROM your_main_table;

-- Revisar cuentas de usuario
SELECT COUNT(*) FROM users;

-- Verificar datos específicos de la aplicación
SELECT * FROM configuration_table LIMIT 5;
```

### Consideraciones Importantes

- **Saneamiento de Datos**: Elimina o anonimiza datos sensibles de desarrollo
- **Secretos de Producción**: Actualiza todas las claves API y contraseñas
- **Flags de Características**: Desactiva características solo para desarrollo
- **Configuración de Email**: Asegura la configuración de correo para producción

</TroubleshootingItem>

<TroubleshootingItem id="deployment-strategy" summary="Paso 4: Estrategia de Despliegue y Puesta en Producción">

### Lista de Verificación Pre-Producción

#### Verificación Técnica

- [ ] Todos los servicios están saludables y en ejecución
- [ ] Las conexiones a base de datos funcionan
- [ ] Integraciones con APIs externas configuradas
- [ ] Certificados SSL válidos
- [ ] Enrutamiento de dominio correcto
- [ ] Monitoreo y registro activos

#### Lista de Seguridad

- [ ] Secretos de producción actualizados
- [ ] Modos debug de desarrollo desactivados
- [ ] Controles de acceso configurados correctamente
- [ ] Procedimientos de respaldo establecidos
- [ ] Escaneo de seguridad completado

### Proceso de Despliegue

1. **Despliegue Inicial**

   ```bash
   # Asegúrate que la rama main está lista
   git checkout main
   git pull origin main

   # Despliega a través de SleakOps
   # Esto se activará automáticamente según tu configuración
   ```

2. **Pruebas Iniciales (Smoke Testing)**

   - Prueba los flujos críticos de usuario
   - Verifica la conectividad con la base de datos
   - Revisa integraciones con servicios externos
   - Valida monitoreo y alertas

3. **Preparación para Puesta en Producción**
   - Programa ventana de mantenimiento si es necesario
   - Prepara procedimientos de reversión
   - Configura monitoreo en tiempo real
   - Notifica a los interesados sobre el cronograma de puesta en producción

### Monitoreo en Producción

```yaml
# Ejemplo de configuración de monitoreo
monitoring:
  health_checks:
    - endpoint: "/health"
      interval: "30s"
      timeout: "5s"
  alerts:
    - type: "response_time"
      threshold: "2s"
    - type: "error_rate"
      threshold: "5%"
  logging:
    level: "info"
    retention: "30d"
```

</TroubleshootingItem>

<TroubleshootingItem id="best-practices" summary="Mejores Prácticas para Entornos de Producción">

### Guías para Dimensionamiento de Recursos

#### Base de Datos

- **Desarrollo**: t3.micro o t3.small
- **Producción**: t3.medium o mayor según la carga
- Habilitar respaldos automáticos
- Configurar réplicas de lectura si es necesario

#### Servicios de Aplicación

- **CPU**: Comenzar con 2x
