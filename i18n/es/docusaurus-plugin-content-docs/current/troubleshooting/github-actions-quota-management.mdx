---
sidebar_position: 15
title: "Gesti√≥n de Cuotas de GitHub Actions y Optimizaci√≥n de CI/CD"
description: "Gesti√≥n de cuotas de GitHub Actions y optimizaci√≥n de la eficiencia de la canalizaci√≥n CI/CD en SleakOps"
date: "2024-12-11"
category: "proyecto"
tags: ["github-actions", "ci-cd", "cuota", "optimizaci√≥n", "despliegue"]
---

import TroubleshootingItem from "@site/src/components/HomepageFeatures/troubleshootingitem";

# Gesti√≥n de Cuotas de GitHub Actions y Optimizaci√≥n de CI/CD

**Fecha:** 11 de diciembre de 2024  
**Categor√≠a:** Proyecto  
**Etiquetas:** GitHub Actions, CI/CD, Cuota, Optimizaci√≥n, Despliegue

## Descripci√≥n del Problema

**Contexto:** Las organizaciones que usan SleakOps con GitHub Actions para canalizaciones CI/CD pueden encontrar limitaciones de cuota, especialmente al ejecutar m√∫ltiples despliegues en entornos de desarrollo y producci√≥n.

**S√≠ntomas Observados:**

- Cuota de GitHub Actions consumida m√°s r√°pido de lo esperado
- Despliegues que tardan significativamente m√°s de lo usual (m√°s de 50 minutos)
- N√∫mero reducido de compilaciones exitosas comparado con meses anteriores
- Agotamiento inesperado de cuota a mitad de mes

**Configuraci√≥n Relevante:**

- M√∫ltiples entornos: Desarrollo y Producci√≥n
- Rendimiento hist√≥rico: ~100 compilaciones por mes anteriormente
- Problema actual: agotamiento de cuota con menos compilaciones
- Supervisi√≥n de despliegues: monitoreo manual requerido

**Condiciones de Error:**

- El agotamiento de cuota ocurre m√°s temprano en el mes
- Tiempos de despliegue m√°s largos consumiendo m√°s minutos
- Despliegues sin supervisi√≥n que llevan a un uso inesperado de cuota

## Soluci√≥n Detallada

<TroubleshootingItem id="github-quota-changes" summary="Entendiendo los Cambios en la Cuota de GitHub Actions">

GitHub ha realizado varios cambios en sus cuotas del nivel gratuito a lo largo del tiempo:

**L√≠mites actuales del Nivel Gratuito de GitHub (2024):**

- **Repositorios p√∫blicos**: Minutos ilimitados
- **Repositorios privados**: 2,000 minutos/mes para cuentas gratuitas
- **Cuentas de organizaci√≥n**: 2,000 minutos/mes (nivel gratuito)

**Cambios Recientes:**

- GitHub no ha reducido significativamente las cuotas gratuitas recientemente
- Sin embargo, ha mejorado la granularidad de facturaci√≥n y monitoreo
- Los patrones de uso pueden haber cambiado debido a tiempos de ejecuci√≥n m√°s largos de trabajos

**Pasos para Verificaci√≥n:**

1. Ir a GitHub ‚Üí Configuraci√≥n ‚Üí Facturaci√≥n y planes
2. Revisar "Uso este mes" bajo Actions
3. Revisar patrones hist√≥ricos de uso

</TroubleshootingItem>

<TroubleshootingItem id="deployment-optimization" summary="Optimizando el Rendimiento del Despliegue">

Para reducir el consumo de minutos de GitHub Actions:

**1. Optimizar Procesos de Construcci√≥n:**

```yaml
# .github/workflows/deploy.yml
name: Despliegue Optimizado
on:
  push:
    branches: [main, develop]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      # Usar cach√© para reducir tiempo de construcci√≥n
      - name: Cachear dependencias
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}

      # Trabajos paralelos para diferentes entornos
      - name: Construir y probar
        run: |
          npm ci
          npm run build
          npm test
```

**2. Despliegues Espec√≠ficos por Entorno:**

```yaml
# Flujo de trabajo separado para dev/prod
strategy:
  matrix:
    environment: [development, production]
steps:
  - name: Desplegar a ${{ matrix.environment }}
    if: |
      (matrix.environment == 'development' && github.ref == 'refs/heads/develop') ||
      (matrix.environment == 'production' && github.ref == 'refs/heads/main')
```

</TroubleshootingItem>

<TroubleshootingItem id="monitoring-setup" summary="Configurando el Monitoreo de Despliegues">

**Configuraci√≥n de Monitoreo Automatizado:**

1. **Notificaciones en Slack/Teams:**

```yaml
- name: Notificar inicio de despliegue
  uses: 8398a7/action-slack@v3
  with:
    status: custom
    custom_payload: |
      {
        text: "üöÄ Despliegue iniciado para ${{ github.repository }}",
        blocks: [
          {
            type: "section",
            text: {
              type: "mrkdwn",
              text: "Entorno: ${{ matrix.environment }}\nRama: ${{ github.ref }}"
            }
          }
        ]
      }
```

2. **Configuraci√≥n de Tiempo M√°ximo:**

```yaml
jobs:
  deploy:
    timeout-minutes: 15 # Prevenir trabajos fuera de control
    steps:
      - name: Desplegar con l√≠mite de tiempo
        timeout-minutes: 10
        run: |
          # Tus comandos de despliegue
```

3. **Integraci√≥n con el Panel de SleakOps:**

- Habilitar notificaciones de despliegue en el panel de SleakOps
- Configurar alertas para despliegues prolongados
- Configurar rollback autom√°tico en caso de timeout

</TroubleshootingItem>

<TroubleshootingItem id="quota-management" summary="Estrategias de Gesti√≥n de Cuotas">

**1. Monitoreo de Uso:**

```bash
# Verificar uso actual v√≠a CLI de GitHub
gh api /user/settings/billing/actions

# Monitorear ejecuciones de workflow
gh run list --limit 50 --json status,conclusion,createdAt,name
```

**2. Optimizaci√≥n de Costos:**

- Usar runners autohospedados para compilaciones intensivas
- Implementar despliegues condicionales
- Cachear dependencias y artefactos de construcci√≥n
- Usar estrategias de matriz eficientemente

**3. Soluciones Alternativas:**

```yaml
# Despliegue condicional basado en cambios
name: Despliegue Inteligente
on:
  push:
    paths:
      - "src/**"
      - "package.json"
      - "Dockerfile"

jobs:
  check-changes:
    outputs:
      should-deploy: ${{ steps.changes.outputs.src }}
    steps:
      - uses: dorny/paths-filter@v2
        id: changes
        with:
          filters: |
            src:
              - 'src/**'
              - 'package.json'

  deploy:
    needs: check-changes
    if: needs.check-changes.outputs.should-deploy == 'true'
    # ... pasos de despliegue
```

</TroubleshootingItem>

<TroubleshootingItem id="sleakops-specific" summary="Optimizaciones Espec√≠ficas para SleakOps">

**1. Configuraciones Espec√≠ficas por Cl√∫ster:**

- Configurar flujos de trabajo separados para QA y Producci√≥n
- Usar variables de entorno de SleakOps para l√≥gica condicional
- Implementar estrategias de despliegue progresivo

**2. Gesti√≥n de Recursos:**

```yaml
# Flujo de trabajo optimizado para SleakOps
env:
  SLEAKOPS_ENV: ${{ github.ref == 'refs/heads/main' && 'production' || 'development' }}

jobs:
  deploy:
    steps:
      - name: Desplegar en SleakOps
        run: |
          # Usar CLI de SleakOps con configuraciones optimizadas
          sleakops deploy \
            --environment $SLEAKOPS_ENV \
            --timeout 300 \
            --max-retries 2
```

**3. Integraci√≥n de Monitoreo:**

- Habilitar webhooks de despliegue en SleakOps
- Configurar pol√≠ticas de rollback autom√°tico
- Configurar l√≠mites de recursos para pods de construcci√≥n

</TroubleshootingItem>

---

_Esta FAQ fue generada autom√°ticamente el 11 de diciembre de 2024 basada en una consulta real de usuario._
