"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8017],{96133:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>t,contentTitle:()=>d,default:()=>g,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"dashboard-loki-not-responding","title":"Dashboard Loki not responding","description":"Dashboard Loki not responding","source":"@site/i18n/es/docusaurus-plugin-content-docs-tutorials/current/dashboard-loki-not-responding.mdx","sourceDirName":".","slug":"/dashboard-loki-not-responding","permalink":"/preview-docs/es/tutorial/dashboard-loki-not-responding","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"addons","permalink":"/preview-docs/es/tutorial/tags/addons"},{"inline":true,"label":"loki","permalink":"/preview-docs/es/tutorial/tags/loki"},{"inline":true,"label":"troubleshooting","permalink":"/preview-docs/es/tutorial/tags/troubleshooting"},{"inline":true,"label":"monitoring","permalink":"/preview-docs/es/tutorial/tags/monitoring"},{"inline":true,"label":"grafana","permalink":"/preview-docs/es/tutorial/tags/grafana"},{"inline":true,"label":"logs","permalink":"/preview-docs/es/tutorial/tags/logs"}],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_label":"Dashboard Loki not responding","sidebar_position":5,"title":"Dashboard Loki not responding","description":"Dashboard Loki not responding","tags":["addons","loki","troubleshooting","monitoring","grafana","logs"],"image":"/img/tutorial-img.png"},"sidebar":"tutorialsSidebar","previous":{"title":"Hacer p\xfablica base de datos RDS","permalink":"/preview-docs/es/tutorial/make-rds-public"},"next":{"title":"Instalar KEDA","permalink":"/preview-docs/es/tutorial/install-keda"}}');var r=n(74848),a=n(28453),s=n(34028);n(26393);const l={sidebar_label:"Dashboard Loki not responding",sidebar_position:5,title:"Dashboard Loki not responding",description:"Dashboard Loki not responding",tags:["addons","loki","troubleshooting","monitoring","grafana","logs"],image:"/img/tutorial-img.png"},d="Dashboard de Loki no responde",t={},c=[];function u(e){const o={admonition:"admonition",em:"em",h1:"h1",header:"header",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.header,{children:(0,r.jsx)(o.h1,{id:"dashboard-de-loki-no-responde",children:"Dashboard de Loki no responde"})}),"\n",(0,r.jsx)(o.admonition,{title:"SOLUCION RAPIDA",type:"success",children:(0,r.jsx)(o.p,{children:"Eliminar el pod 'loki-read'. Tras 60 segundos este vuelve a funcionar, y con este tambi\xe9n el DataSource Loki y sus dashboards relacionados."})}),"\n",(0,r.jsx)(o.admonition,{type:"info",children:(0,r.jsx)(o.p,{children:"Este error es m\xe1s recurrente en cluster con baja disponibilidad puesto que generan m\xe1s rotaci\xf3n de nodos y de pods. Se puede disminuir la recurrencia de este error aumentando la cantidad de Pods loki-read desde la configuraci\xf3n del Addon Loki."})}),"\n",(0,r.jsx)(o.p,{children:"Loki puede estar andando, tal como en la siguiente imagen:"}),"\n",(0,r.jsx)(s.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki.png",alt:"loki"})}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"Si por alguna rotaci\xf3n en Kubernetes se resetea el pod de loki-backend SIN resetearse el de loki-read comienza a fallar, tal como fuerzo reiniciando el StatefulSet de loki-backend lo que concluye en la siguiente situaci\xf3n:"}),"\n"]}),"\n",(0,r.jsx)(s.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-2.png",alt:"loki-2"})}),"\n",(0,r.jsxs)(o.p,{children:["Puede verse que el '",(0,r.jsx)(o.em,{children:"Age"}),"' de loki-backend es menor que el '",(0,r.jsx)(o.em,{children:"Age"}),"' de loki-read, en estos casos ocurre este error que provoca que el DataSource de Loki no funcione y por ende tampoco los dashboards que lo utilizan. El error surge porque los pods de 'loki-read' no intentan reconectarse a 'loki-backend' y quedan en este estado donde no responden a las requests que les hace 'loki-backend'."]}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"Puede verse que el error se forz\xf3 correctamente y ahora el dashboard no responde:"}),"\n"]}),"\n",(0,r.jsx)(s.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-3.png",alt:"loki-3"})}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"La forma para fixearlo es reiniciando el Deployment de 'loki-read' o bien eliminando el Pod que est\xe9 corriendo."}),"\n"]}),"\n",(0,r.jsx)(s.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-4.png",alt:"loki-4"})}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"Una vez hecho eso volvemos a la situaci\xf3n deseada que es la siguiente:"}),"\n"]}),"\n",(0,r.jsx)(s.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-5.png",alt:"loki-5"})}),"\n",(0,r.jsxs)(o.p,{children:["Como puede verse ahora el ",(0,r.jsx)(o.em,{children:"Age"})," de loki-read es menor que el ",(0,r.jsx)(o.em,{children:"Age"})," de loki-backend con lo que nos aseguramos que loki-read est\xe1 conectado y el Dashboard vuelve a funcionar correctamente como se ve en la siguiente imagen:"]}),"\n",(0,r.jsx)(s.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-6.png",alt:"loki-6"})}),"\n",(0,r.jsx)(o.p,{children:"Se puede disminuir la recurrencia de este error si se incrementa la cantidad de pods 'loki-read' activos. Lo cual puede realizarse desde la configuraci\xf3n del Addon Loki."}),"\n",(0,r.jsx)(s.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/tutorials/dashboard-loki-not-responding/loki-7.png",alt:"loki-7"})})]})}function g(e={}){const{wrapper:o}={...(0,a.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},26393:()=>{}}]);