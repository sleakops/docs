"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6505],{9867:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"cluster/addons/otel","title":"Open Telemetry","description":"In Sleakops Opentelemetry  is an addon that enables you to understand the internal state of a system by examining its telemetry data, which includes traces and metrics. Opentelemetry is installed alongside Prometheus  to store valuable metrics about the system and  Grafana  to visualize the data.","source":"@site/docs/cluster/addons/otel.mdx","sourceDirName":"cluster/addons","slug":"/cluster/addons/otel","permalink":"/docs/preview-docs/es/cluster/addons/otel","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"Open Telemetry","pagination_back":"cluster/addons/grafana","pagination_next":"cluster/addons/kubecost"},"sidebar":"tutorialSidebar","previous":{"title":"Loki","permalink":"/docs/preview-docs/es/cluster/addons/loki"},"next":{"title":"Kubecost","permalink":"/docs/preview-docs/es/cluster/addons/kubecost"}}');var r=n(4848),a=n(8453),o=n(4028),i=n(2644);const l={sidebar_label:"Open Telemetry",pagination_back:"cluster/addons/grafana",pagination_next:"cluster/addons/kubecost"},d="Open Telemetry",c={},h=[{value:"FAQs",id:"faqs",level:2},{value:"<strong>How it works</strong>",id:"how-it-works",level:3},{value:"<strong>Traces and Metrics</strong>",id:"traces-and-metrics",level:3},{value:"Using the Addon",id:"using-the-addon",level:3},{value:"Autoinstrumentation",id:"autoinstrumentation",level:3},{value:"Manual instrumentation",id:"manual-instrumentation",level:3},{value:"What does Sleakops install when installing OpenTelemetry",id:"what-does-sleakops-install-when-installing-opentelemetry",level:3},{value:"Start using OpenTelemetry",id:"start-using-opentelemetry",level:2}];function m(e){const t={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"open-telemetry",children:"Open Telemetry"})}),"\n",(0,r.jsxs)(t.p,{children:["In Sleakops ",(0,r.jsxs)(t.a,{href:"https://opentelemetry.io/",children:["Opentelemetry ",(0,r.jsx)(i.HaR,{})]})," is an addon that enables you to understand the internal state of a system by examining its telemetry data, which includes traces and metrics. Opentelemetry is installed alongside ",(0,r.jsxs)(t.a,{href:"https://prometheus.io/docs/introduction/overview/",children:["Prometheus ",(0,r.jsx)(i.HaR,{})]})," to store valuable metrics about the system and  ",(0,r.jsxs)(t.a,{href:"https://grafana.com/docs/",children:["Grafana ",(0,r.jsx)(i.HaR,{})]})," to visualize the data."]}),"\n",(0,r.jsxs)(t.p,{children:["All OpenTelemetry data is accesible through Grafana. Check ",(0,r.jsx)(t.a,{href:"/cluster/addons/grafana",children:"our Grafana documentation"})," to learn more about our implementation."]}),"\n",(0,r.jsx)(t.h2,{id:"faqs",children:"FAQs"}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(t.h3,{id:"how-it-works",children:(0,r.jsx)(t.strong,{children:"How it works"})})}),(0,r.jsx)(t.p,{children:"In order to use OpenTelemetry, you need to have a project instrumented with OpenTelemetry. Sleakops will deploy the necessary resources to collect and store the data.\nInstrumentation is the process of adding code to your application to collect telemetry data. OpenTelemetry provides libraries to instrument your application in a variety of languages.\nAlso Sleakops offers Autoinstrumentation for some languages, learn more about it in the section Autoinstrumentation."})]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(t.h3,{id:"traces-and-metrics",children:(0,r.jsx)(t.strong,{children:"Traces and Metrics"})})}),(0,r.jsxs)(t.p,{children:["Telemetry data consist of three main components: traces, metrics and logs. For logs Sleakops offers ",(0,r.jsx)(t.a,{href:"/cluster/addons/loki",children:"Loki"}),". Traces are the path of a request through the system, while metrics are the values of the system at a given time."]}),(0,r.jsxs)(t.p,{children:["The OpenTelemetry addon collects traces from the pods running your project and sends them to the OpenTelemetry collector. The collector stores the traces throw ",(0,r.jsxs)(t.a,{href:"https://grafana.com/oss/tempo/",children:["Tempo ",(0,r.jsx)(i.HaR,{})]}),". Traces could be visualized in Grafana.\nAlso the collector generates metrics via the ",(0,r.jsxs)(t.a,{href:"https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/connector/spanmetricsconnector/README.md",children:["SpanMetrics Connector ",(0,r.jsx)(i.HaR,{})]})," and stores them in Prometheus."]}),(0,r.jsx)(t.p,{children:"A dashboard is available in Grafana for every project that gets instrumented."})]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(t.h3,{id:"using-the-addon",children:"Using the Addon"})}),(0,r.jsx)(t.p,{children:"Let's dive in with a view of the OpenTelemetry dashboard. First three metrics are Request rates, Error rates and Durations, or RED metrics. These metrics are the most important to monitor the health of your application.\nThen we see a table that list Top operations (endpoints) and their error rate as well."}),(0,r.jsx)(o.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/cluster/addons/otel/otel-dashboard.png",alt:"otel-dashboard"})}),(0,r.jsx)(o.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/cluster/addons/otel/otel-dashboard-p2.png",alt:"otel-dashboard-p2"})}),(0,r.jsx)(t.p,{children:"Tipically the dashboard gives a quick look to problematic endpoints, application performance bottlenecks, as well as the overall health of the application."})]}),"\n",(0,r.jsxs)(n,{id:"autoinstrumentation",children:[(0,r.jsx)("summary",{children:(0,r.jsx)(t.h3,{id:"autoinstrumentation",children:"Autoinstrumentation"})}),(0,r.jsx)(t.p,{children:"Sleakops offers autoinstrumentation for some languages. This means that Sleakops will automatically instrument your project with OpenTelemetry. This is done by deploying an init container alongside your project. The sidecar container will collect the telemetry data and send it to the OpenTelemetry collector."})]}),"\n",(0,r.jsxs)(n,{id:"manual-instrumentation",children:[(0,r.jsx)("summary",{children:(0,r.jsx)(t.h3,{id:"manual-instrumentation",children:"Manual instrumentation"})}),(0,r.jsx)(t.p,{children:"Manual instrumentation resolves the implementation through code of OpenTelemetry in your project. This is done by adding the OpenTelemetry libraries to your project and adding the necessary code to collect the telemetry data. Sleakops presents the endpoint where the telemetry data should be sent."})]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(t.h3,{id:"what-does-sleakops-install-when-installing-opentelemetry",children:"What does Sleakops install when installing OpenTelemetry"})}),(0,r.jsx)(t.p,{children:"The stack deployed when the addon is installed is the following:"}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsxs)(t.a,{href:"https://opentelemetry.io/docs/kubernetes/operator/",children:["OpenTelemetry Operator ",(0,r.jsx)(i.HaR,{})]})}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsxs)(t.a,{href:"https://opentelemetry.io/docs/collector/",children:["OpenTelemetry Collector ",(0,r.jsx)(i.HaR,{})]})," Custom resource (CRD)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsxs)(t.a,{href:"https://opentelemetry.io/docs/kubernetes/operator/automatic/",children:["OpenTelemetry Instrumentation ",(0,r.jsx)(i.HaR,{})]})," Custom resource (CRD) for every autoinstrumentated project"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsxs)(t.a,{href:"https://grafana.com/oss/tempo/",children:["Tempo ",(0,r.jsx)(i.HaR,{})]})," with a frontend, and caching enabled"]}),"\n",(0,r.jsx)(t.li,{children:"S3 Bucket as Tempo Backend"}),"\n"]})]}),"\n",(0,r.jsx)(t.h2,{id:"start-using-opentelemetry",children:"Start using OpenTelemetry"}),"\n",(0,r.jsx)(t.p,{children:"To start using OpenTelemetry, you need to install the addon. Then go to the Project list page, activate the project Instrumentation using the small white icon at the left of the name of the project."}),"\n",(0,r.jsx)(o.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/cluster/addons/otel/instrumentation-options.png",alt:"instrumentation-options"})}),"\n",(0,r.jsx)(t.p,{children:"These are the options you can choose from:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Option"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Enabled"}),(0,r.jsx)(t.td,{children:"Enable or disable instrumentation on this proyect."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Autoinstrumentation"}),(0,r.jsxs)(t.td,{children:["Opt for autoinstrumentation. Read more on ",(0,r.jsx)("a",{href:"#autoinstrumentation",children:" Autoinstrumentation "})," and ",(0,r.jsx)("a",{href:"#manual-instrumentation",children:" Manual Instrumentation "})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Language"}),(0,r.jsx)(t.td,{children:"If autoinstrumentation is enabled, this option marks the language of the project. Currently GO, Java, NodeJS, Python and DotNet are available."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Sample Rate"}),(0,r.jsx)(t.td,{children:"If autoinstrumentation is enabled, this option marks the sampling rate, where 0 is none and 1 is all the traces."})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"Projects that are instrumented are visible in the Project list page. Marked with a green icon, as in the image:"}),"\n",(0,r.jsx)(o.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,r.jsx)("img",{src:"/img/cluster/addons/otel/project-list-with-instrumented-app.png",alt:"project-list-with-instrumented-app"})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}}}]);