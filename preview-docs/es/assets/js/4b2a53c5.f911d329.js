"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3506],{9237:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>g});const a=JSON.parse('{"id":"quickstart/django_celery/django-celery","title":"Django + Celery","description":"Aprende c\xf3mo desplegar tu proyecto Django + Celery usando Sleakops.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/quickstart/django_celery/index.mdx","sourceDirName":"quickstart/django_celery","slug":"/quickstart/django_celery/","permalink":"/docs/preview-docs/es/quickstart/django_celery/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"django-celery","title":"Django + Celery","sidebar_label":"Django + Celery"},"sidebar":"tutorialSidebar","previous":{"title":"Conectar a Git","permalink":"/docs/preview-docs/es/connect_to_git"},"next":{"title":"n8n + Modo Worker","permalink":"/docs/preview-docs/es/quickstart/n8n/"}}');var s=n(4848),o=n(8453),c=n(4028),l=(n(6393),n(2644));const i={id:"django-celery",title:"Django + Celery",sidebar_label:"Django + Celery"},t=void 0,d={},g=[{value:"Prerrequisitos",id:"prerrequisitos",level:2},{value:"Empecemos",id:"empecemos",level:2},{value:"Crear un proyecto",id:"crear-un-proyecto",level:3},{value:"Crear un Servicio Web",id:"crear-un-servicio-web",level:3},{value:"Desplegar celery worker",id:"desplegar-celery-worker",level:3},{value:"Crear un hook de migraci\xf3n",id:"crear-un-hook-de-migraci\xf3n",level:3},{value:"Crear un hook de collect static",id:"crear-un-hook-de-collect-static",level:3},{value:"Crear una Base de Datos Postgresql",id:"crear-una-base-de-datos-postgresql",level:3},{value:"Crear Bucket S3",id:"crear-bucket-s3",level:3},{value:"Crear Rabbitmq",id:"crear-rabbitmq",level:3},{value:"Crear tus variables de entorno",id:"crear-tus-variables-de-entorno",level:3},{value:"Despliegues",id:"despliegues",level:3},{value:"Opcional",id:"opcional",level:2},{value:"CI con Github",id:"ci-con-github",level:3}];function u(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.p,{children:"Aprende c\xf3mo desplegar tu proyecto Django + Celery usando Sleakops."}),"\n",(0,s.jsx)(r.h2,{id:"prerrequisitos",children:"Prerrequisitos"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Cuenta en Sleakops"}),"\n",(0,s.jsxs)(r.li,{children:["Un Cl\xfaster en esta cuenta. Si no lo tienes, ",(0,s.jsx)(r.a,{href:"/cluster",children:"aqu\xed est\xe1 la documentaci\xf3n sobre c\xf3mo hacerlo"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["Un Ambiente configurado. Si no lo tienes, ",(0,s.jsx)(r.a,{href:"/environment",children:"aqu\xed est\xe1 la documentaci\xf3n sobre c\xf3mo hacerlo"})]}),"\n",(0,s.jsx)(r.li,{children:"Proyecto Django configurado con celery (Este proyecto necesita tener docker)."}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"empecemos",children:"Empecemos"}),"\n",(0,s.jsxs)(r.p,{children:["Para este ejemplo, vamos a usar ",(0,s.jsxs)(r.a,{href:"https://github.com/sleakops/example-django-celery",children:["este proyecto ",(0,s.jsx)(l.HaR,{})]}),". Es un proyecto Django con Celery que ya tiene Docker configurado para funcionar. Tambi\xe9n vamos a configurar una base de datos Postgresql, bucket S3 y Rabbitmq necesarios para este proyecto."]}),"\n",(0,s.jsx)(r.h3,{id:"crear-un-proyecto",children:"Crear un proyecto"}),"\n",(0,s.jsx)(r.p,{children:'Para empezar, vamos a crear un nuevo proyecto. Para hacer esto, hacemos clic en el bot\xf3n "Projects" en el panel izquierdo:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-project.png",alt:"click-project-reference"})}),"\n",(0,s.jsx)(r.p,{children:'Dentro del panel de Proyectos podr\xe1s ver todos los proyectos que tienes y gestionarlos desde aqu\xed. Queremos crear uno nuevo as\xed que hagamos clic en el bot\xf3n "create" en la parte superior derecha:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-create-project.png",alt:"click-create-project-reference"})}),"\n",(0,s.jsx)(r.p,{children:"En la pantalla de creaci\xf3n de proyecto tenemos los siguientes campos:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Configuraci\xf3n"})}),(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Descripci\xf3n"})})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Environment"})}),(0,s.jsx)(r.td,{children:"Tenemos que seleccionar el ambiente creado previamente."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Nodepool"}),(0,s.jsx)(r.td,{children:"Dejaremos el predeterminado."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Repositories"})}),(0,s.jsx)(r.td,{children:"Seleccionaremos nuestro repositorio que queremos desplegar. En nuestro caso example-django-celery."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Project Name"}),(0,s.jsx)(r.td,{children:"Podemos definir un nombre de proyecto. Para el ejemplo dejaremos el predeterminado."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Branch"})}),(0,s.jsx)(r.td,{children:'Tiene que coincidir con el que tenemos en nuestro proyecto. En nuestro caso es "Main".'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Dockerfile path"}),(0,s.jsx)(r.td,{children:"Es la ruta relativa al dockerfile en tu proyecto."})]})]})]}),"\n",(0,s.jsx)(r.p,{children:'Una vez configurado todo eso, creamos el proyecto con el bot\xf3n "Submit" en la parte inferior derecha:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-project.png",alt:"create-project-reference"})}),"\n",(0,s.jsx)(r.p,{children:'Con eso, el proyecto comienza a crearse. Mientras tanto vamos a las cargas de trabajo con el bot\xf3n "Workloads" en el panel izquierdo:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-workloads.png",alt:"click-workloads-reference"})}),"\n",(0,s.jsx)(r.h3,{id:"crear-un-servicio-web",children:"Crear un Servicio Web"}),"\n",(0,s.jsx)(r.p,{children:"Aqu\xed lo que vamos a hacer es crear un servicio web, as\xed que vamos a la secci\xf3n de servicio web y creamos uno:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-create-web-service.png",alt:"click-create-web-service-reference"})}),"\n",(0,s.jsx)(r.p,{children:"En esta p\xe1gina vamos a completar el primer formulario con los siguientes campos:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Configuraci\xf3n"})}),(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Descripci\xf3n"})})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Project"})}),(0,s.jsx)(r.td,{children:'Seleccionamos el proyecto que creamos previamente, en nuestro caso "example-django-celery".'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Name"}),(0,s.jsx)(r.td,{children:"Definimos un nombre para el servicio web."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Command"})}),(0,s.jsx)(r.td,{children:"Por defecto esto tomar\xe1 el valor que est\xe1 en el dockerfile, en nuestro caso esto est\xe1 bien."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Port"}),(0,s.jsx)(r.td,{children:"Lo mismo que el command."})]})]})]}),"\n",(0,s.jsx)(r.p,{children:'Luego continuamos haciendo clic en el bot\xf3n "Next" hasta el paso 3:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-web-service.png",alt:"create-web-service-reference"})}),"\n",(0,s.jsx)(r.p,{children:'En el paso 3 tenemos que editar el campo path y poner el endpoint de healthcheck que en nuestro caso es "/healthcheck/". Luego hacemos clic en el bot\xf3n "Next" hasta que se cree el servicio web:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-web-service-2.png",alt:"create-web-service-2-reference"})}),"\n",(0,s.jsx)(r.h3,{id:"desplegar-celery-worker",children:"Desplegar celery worker"}),"\n",(0,s.jsx)(r.p,{children:"Bueno, con esto podemos ver nuestro servicio web despleg\xe1ndose. Ahora vamos a desplegar el celery. Para esto tenemos que ir a la secci\xf3n workers dentro de la misma pantalla de workloads:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-worker.png",alt:"click-worker-reference"})}),"\n",(0,s.jsx)(r.p,{children:'Y hacemos clic en el bot\xf3n "Create" para crear uno nuevo:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-create-worker.png",alt:"click-create-worker-reference"})}),"\n",(0,s.jsx)(r.p,{children:"En la pantalla de creaci\xf3n de workers tendremos que completar los siguientes campos:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Configuraci\xf3n"})}),(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Descripci\xf3n"})})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Project"})}),(0,s.jsx)(r.td,{children:'Seleccionar el proyecto creado previamente. En nuestro caso "example-django-celery".'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Name"}),(0,s.jsx)(r.td,{children:'Definimos el nombre que le vamos a dar al worker. En nuestro caso "celery".'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Command"})}),(0,s.jsxs)(r.td,{children:["Aqu\xed establecemos el comando para ejecutar celery, en nuestro caso es: ",(0,s.jsx)(r.code,{children:"bash celery -A core.celery_app worker -l INFO --concurrency 1 --max-tasks-per-child 1 --prefetch-multiplier 1 -n celery@%h --queues default,build,deployment,cluster,canvas,billing"})]})]})]})]}),"\n",(0,s.jsx)(r.p,{children:'Con estos campos completados haremos clic en el bot\xf3n "Next" en la parte inferior derecha y luego "Submit" ya que no necesitamos editar nada m\xe1s:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-worker.png",alt:"create-worker-reference"})}),"\n",(0,s.jsx)(r.p,{children:"Con esto veremos nuestro celery publicado. Ahora tenemos que configurar los hooks. Para esto vamos a la secci\xf3n hooks:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-hook.png",alt:"click-hook-reference"})}),"\n",(0,s.jsx)(r.h3,{id:"crear-un-hook-de-migraci\xf3n",children:"Crear un hook de migraci\xf3n"}),"\n",(0,s.jsx)(r.p,{children:"En la pantalla de creaci\xf3n de hook tendremos los siguientes campos:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Configuraci\xf3n"})}),(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Descripci\xf3n"})})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Project"})}),(0,s.jsx)(r.td,{children:'Seleccionar el proyecto creado previamente. En nuestro caso "example-django-celery".'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Name"})}),(0,s.jsx)(r.td,{children:'Definimos el nombre que le vamos a dar al worker. En nuestro caso "migrations".'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Command"})}),(0,s.jsxs)(r.td,{children:["Aqu\xed establecemos el comando para ejecutar celery, en nuestro caso es: ",(0,s.jsx)(r.code,{children:"bash python manage.py migrate --no-input "})]})]})]})]}),"\n",(0,s.jsx)(r.p,{children:'Con estos campos completados haremos clic en el bot\xf3n "Next" en la parte inferior derecha y luego "Submit" ya que no necesitamos editar nada m\xe1s:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-hook.png",alt:"create-hook-reference"})}),"\n",(0,s.jsx)(r.h3,{id:"crear-un-hook-de-collect-static",children:"Crear un hook de collect static"}),"\n",(0,s.jsx)(r.p,{children:"Ahora procedemos a crear otro hook que necesitamos para los est\xe1ticos:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-create-collectstatic-hook.png",alt:"click-create-collectstatic-hook-reference"})}),"\n",(0,s.jsx)(r.p,{children:"En este formulario vamos a hacer lo mismo que el anterior pero modificando el comando. Hacemos clic en next hasta crear el hook (sin modificar nada m\xe1s):"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-collectstatic-hook.png",alt:"create-collectstatic-hook-reference"})}),"\n",(0,s.jsx)(r.p,{children:"El comando que usamos es el siguiente:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"python manage.py collectstatic --no-input\n"})}),"\n",(0,s.jsx)(r.h3,{id:"crear-una-base-de-datos-postgresql",children:"Crear una Base de Datos Postgresql"}),"\n",(0,s.jsx)(r.p,{children:'Una vez que hemos creado los hooks tenemos que ir a crear nuestra base de datos. Para hacer esto vamos a la secci\xf3n "Dependencies":'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-dependencies.png",alt:"click-dependencies-reference"})}),"\n",(0,s.jsx)(r.p,{children:'Dentro de esta secci\xf3n hacemos clic en el bot\xf3n "Create" en la parte superior derecha y luego seleccionamos "Postgresql":'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-create-dependencies.png",alt:"click-create-dependencies-reference"})}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-postgresql.png",alt:"click-postgresql-reference"})}),"\n",(0,s.jsx)(r.p,{children:'En el 1er formulario de creaci\xf3n de postgresql tendremos que seleccionar nuestro proyecto creado previamente y definir un nombre para \xe9l, luego hacemos clic en el bot\xf3n "Next" en la parte inferior derecha:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-postgresql.png",alt:"create-postgresql-reference"})}),"\n",(0,s.jsx)(r.p,{children:"En el 2do formulario vamos a tener muchos campos, los \xfanicos que nos importan son los siguientes:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Configuraci\xf3n"})}),(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Descripci\xf3n"})})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Database Master Username"})}),(0,s.jsx)(r.td,{children:"Aqu\xed asignamos un nombre de usuario root a nuestra base de datos."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Database Master Password"})}),(0,s.jsx)(r.td,{children:"Una contrase\xf1a para este usuario root."})]})]})]}),"\n",(0,s.jsx)(r.p,{children:"Una vez rellenados estos campos, estamos listos para continuar. Haga clic en el bot\xf3n \xabSiguiente\xbb situado en la parte inferior derecha para pasar al tercer formulario:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-postgresql-2.png",alt:"create-postgresql-2-reference"})}),"\n",(0,s.jsx)(r.p,{children:"En este \xfaltimo formulario, vamos a ajustar las variables de entorno que tenemos en nuestro proyecto con respecto a la base de datos. Para ello, debemos cambiar las siguientes variables por las nuestras propias:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Antes"})}),(0,s.jsx)(r.th,{children:(0,s.jsx)(r.strong,{children:"Despues"})})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"*_POSTGRESQL_NAME"}),(0,s.jsx)(r.td,{children:"DB_NAME"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"*_POSTGRESQL_USERNAME"}),(0,s.jsx)(r.td,{children:"DB_USER"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"*_POSTGRESQL_PASSWORD"}),(0,s.jsx)(r.td,{children:"DB_PASSWORD"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"*_POSTGRESQL_ADDRESS"}),(0,s.jsx)(r.td,{children:"DB_HOST"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"*_POSTGRESQL_PORT"}),(0,s.jsx)(r.td,{children:"DB_PORT"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:"Deber\xeda verse similar a la imagen de abajo. A continuaci\xf3n, haga clic en el bot\xf3n \xabEnviar\xbb y se crear\xe1 su base de datos:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-postgresql-3.png",alt:"create-postgresql-3-reference"})}),"\n",(0,s.jsx)(r.h3,{id:"crear-bucket-s3",children:"Crear Bucket S3"}),"\n",(0,s.jsx)(r.p,{children:'En la misma p\xe1gina de dependencias tenemos que crear nuestro bucket s3, para ello vamos a ir al bot\xf3n "Create" nuevamente:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-create-s3-dependencies.png",alt:"click-create-s3-dependencies-reference"})}),"\n",(0,s.jsx)(r.p,{children:"Y seleccionamos S3 Bucket:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-create-s3-dependencies-2.png",alt:"click-create-s3-dependencies-2-reference"})}),"\n",(0,s.jsx)(r.p,{children:'En el primer formulario tenemos que seleccionar nuestro proyecto creado previamente y definir un nombre para el bucket, tenemos que tomar en cuenta que el nombre del bucket es global as\xed que tiene que ser \xfanico. Ahora hacemos clic en el bot\xf3n "Next" y vamos al paso 3:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-s3-dependencies.png",alt:"create-s3-dependencies-reference"})}),"\n",(0,s.jsxs)(r.p,{children:["Aqu\xed vamos a ver algunas variables de entorno definidas para el bucket. Vamos a editar la que dice ",(0,s.jsx)(r.strong,{children:"COLLECTSTATICEXAMPLEDJANGOCELERY_BUCKET_NAME"})," y la vamos a llamar ",(0,s.jsx)(r.strong,{children:"DJANGO_AWS_STORAGE_BUCKET_NAME"}),'. Con este simple cambio hacemos clic en el bot\xf3n "Submit" en la parte inferior derecha para terminar de crear el bucket:']}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-s3-dependencies-3.png",alt:"create-s3-dependencies-3-reference"})}),"\n",(0,s.jsx)(r.h3,{id:"crear-rabbitmq",children:"Crear Rabbitmq"}),"\n",(0,s.jsx)(r.p,{children:"Ahora necesitamos una dependencia m\xe1s. Nuestro Rabbitmq para encolar las tareas de celery, as\xed que vamos a ello:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-create-rabbitmq-dependencies.png",alt:"click-create-rabbitmq-dependencies-reference"})}),"\n",(0,s.jsx)(r.p,{children:"Y seleccionamos Rabbitmq:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-select-rabbitmq.png",alt:"click-select-rabbitmq-reference"})}),"\n",(0,s.jsx)(r.p,{children:'En el primer formulario tendremos que seleccionar nuestro proyecto y definir un nombre para \xe9l. Luego hacemos clic en el bot\xf3n "Next" en la parte inferior derecha:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-rabbitmq.png",alt:"create-rabbitmq-reference"})}),"\n",(0,s.jsx)(r.p,{children:'En el siguiente formulario tenemos varios campos pero los \xfanicos que nos importan para este ejemplo son el username y password, podemos definir lo que queramos. Para este ejemplo eleg\xed admin como username y para la contrase\xf1a la gener\xe9 aleatoriamente con el bot\xf3n de dado. Luego hacemos clic en el bot\xf3n "Next" para ir al siguiente formulario:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-rabbitmq-2.png",alt:"create-rabbitmq-2-reference"})}),"\n",(0,s.jsx)(r.p,{children:'En este \xfaltimo formulario tenemos que cambiar el nombre de la variable que termina en *_BROKER_AUTH_URL a CELERY_BROKER_URL (como se muestra en la imagen). Luego hacemos clic en el bot\xf3n "Submit" en la parte inferior derecha para terminar de crear rabbitmq:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-rabbitmq-3.png",alt:"create-rabbitmq-3-reference"})}),"\n",(0,s.jsx)(r.h3,{id:"crear-tus-variables-de-entorno",children:"Crear tus variables de entorno"}),"\n",(0,s.jsxs)(r.p,{children:["Una vez que las dependencias est\xe1n desplegadas tenemos que configurar nuestras variables de entorno. Vamos a ir a la secci\xf3n ",(0,s.jsx)(r.strong,{children:"Vargroups"}),":"]}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-vargroups.png",alt:"click-vargroups-reference"})}),"\n",(0,s.jsx)(r.p,{children:'Aqu\xed ver\xe1s todas tus variables de entorno que creaste agrupadas en grupos, por ejemplo deber\xedas haber creado una con los datos para la base de datos (que es la que ves en la imagen). Ahora vamos a crear otra para nuestras variables de entorno de django, para esto hacemos clic en el bot\xf3n "Create" en la parte superior derecha:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-create-vargroups.png",alt:"click-create-vargroups-reference"})}),"\n",(0,s.jsx)(r.p,{children:"En este formulario tenemos los siguientes campos:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Project: seleccionamos el proyecto que creamos previamente."}),"\n",(0,s.jsx)(r.li,{children:'Workload: Seleccionamos "global" que hace referencia a ser usado por todos nuestros workloads.'}),"\n",(0,s.jsx)(r.li,{children:"Name: Definimos un nombre para este grupo de variables."}),"\n",(0,s.jsx)(r.li,{children:"Type: Si queremos cargarlo por archivo o por variable."}),"\n",(0,s.jsx)(r.li,{children:"Vars: Aqu\xed habilitamos el textmode y copiamos las siguientes variables de entorno:"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"CELERY_RESULT_BACKEND=django-db\nDJANGO_ADMIN_URL=admin/\nDJANGO_DEBUG=False\nDJANGO_SECRET_KEY=secret_key\nDJANGO_SETTINGS_MODULE=core.settings.production\nDJANGO_STATIC_STORAGE=storages.backends.s3boto3.S3StaticStorage\nDB_ENGINE=django.db.backends.postgresql_psycopg2\nENVIRONMENT=production\nLOGS_LEVEL=INFO\nPYTHONPATH=.\n"})}),"\n",(0,s.jsx)(r.p,{children:'Estas variables de entorno son requeridas para nuestro proyecto de ejemplo. Finalmente hacemos clic en el bot\xf3n "Submit" en la parte inferior derecha para crear el grupo de variables.'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/create-vargroup.png",alt:"create-vargroup-reference"})}),"\n",(0,s.jsx)(r.h3,{id:"despliegues",children:"Despliegues"}),"\n",(0,s.jsx)(r.p,{children:'Como \xfaltimo paso vamos a ver nuestro proyecto desplegado, para esto vamos a la secci\xf3n "Deployments" del panel izquierdo:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-deployments.png",alt:"click-deployments-reference"})}),"\n",(0,s.jsx)(r.p,{children:'Aqu\xed vamos a ver todos los despliegues que hacemos. En nuestro caso es el primero y podemos ver que se ha creado correctamente, en caso de que veas alg\xfan error si haces clic en "error" puedes ver una descripci\xf3n del mismo.\nSi no vemos ning\xfan error entonces significa que el proyecto ya est\xe1 desplegado, podr\xedamos comenzar a usarlo desde la url que nos proporcion\xf3 el servicio web.'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/deployments.png",alt:"deployments-reference"})}),"\n",(0,s.jsx)(r.p,{children:"Esto concluye nuestro proceso de despliegue de proyecto. Te dejamos un paso opcional que es configurar el ci con github."}),"\n",(0,s.jsx)(r.h2,{id:"opcional",children:"Opcional"}),"\n",(0,s.jsx)(r.h3,{id:"ci-con-github",children:"CI con Github"}),"\n",(0,s.jsx)(r.p,{children:"Cada vez que hagas un cambio en tu c\xf3digo y quieras desplegarlo tendr\xe1s que hacer un build y un deploy, esto eventualmente se vuelve tedioso. Por eso para evitar esto tenemos que implementar ci en github."}),"\n",(0,s.jsx)(r.p,{children:'Para esto vamos a ir a "Projects" en el panel izquierdo:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-project-2.png",alt:"click-project-2-reference"})}),"\n",(0,s.jsx)(r.p,{children:"Ubiquemos nuestro proyecto y hagamos clic en el engranaje para acceder a la configuraci\xf3n del proyecto:"}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-settings-project.png",alt:"click-settings-project-reference"})}),"\n",(0,s.jsx)(r.p,{children:'En la configuraci\xf3n del proyecto ubicamos el que dice "Git pipelines" y hacemos clic en \xe9l:'}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/click-git-pipelines.png",alt:"click-git-pipelines-reference"})}),"\n",(0,s.jsx)(r.p,{children:"Aqu\xed vamos a encontrar lo que necesitamos para hacer esto. B\xe1sicamente necesitamos configurar un archivo en la ra\xedz de nuestro proyecto .github/workflows/ llamado ci_sleakops_demo.yml y en ese archivo vamos a pegar el contenido que aparece en esta p\xe1gina."}),"\n",(0,s.jsx)(c.A,{overlayBgColorEnd:"rgba(255, 255, 255, 0.8)",children:(0,s.jsx)("img",{src:"/img/quickstart/django_celery/git-pipelines.png",alt:"git-pipelines-reference"})}),"\n",(0,s.jsxs)(r.p,{children:["Esto necesita tener una variable de entorno SLEAKOPS_KEY, si no la tienes tienes que ir al enlace que aparece ah\xed ",(0,s.jsx)(r.strong,{children:"Settings -> CLI"}),", obtenerla y guardarla como una variable de entorno."]}),"\n",(0,s.jsx)(r.p,{children:'Con esto configurado y desplegado cada vez que hagas un push a tu rama "main" se lanzar\xe1 autom\xe1ticamente una nueva versi\xf3n de tu aplicaci\xf3n.'})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);